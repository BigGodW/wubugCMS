System.register(["./element-plus-legacy.js","./category-legacy.js","./collect-legacy.js","./index-legacy.js","./@vue-legacy.js","./lodash-es-legacy.js","./async-validator-legacy.js","./dayjs-legacy.js","./@element-plus-legacy.js","./@popperjs-legacy.js","./@ctrl-legacy.js","./memoize-one-legacy.js","./normalize-wheel-es-legacy.js","./pinia-legacy.js","./pinia-plugin-persist-legacy.js","./vanilla-jsoneditor-legacy.js","./json-source-map-legacy.js","./@jsonquerylang-legacy.js","./@fortawesome-legacy.js","./natural-compare-lite-legacy.js","./@codemirror-legacy.js","./@lezer-legacy.js","./crelt-legacy.js","./style-mod-legacy.js","./w3c-keyname-legacy.js","./@replit-legacy.js","./codemirror-wrapped-line-indent-legacy.js","./fast-deep-equal-legacy.js","./fast-uri-legacy.js","./jmespath-legacy.js","./jsonpath-plus-legacy.js","./immutable-json-patch-legacy.js","./jsonrepair-legacy.js","./vue-router-legacy.js","./axios-legacy.js","./js-cookie-legacy.js","./nprogress-legacy.js","./saduocss-legacy.js"],(function(e,l){"use strict";var a,t,s,r,u,c,n,d,o,g,i,m,p,y,f,j,h,_,V,b,v,T,U,w,k,x,N,q,z,C,$,D,R;return{setters:[e=>{a=e.E,t=e.s,s=e.t,r=e.H,u=e.R,c=e.f,n=e.m,d=e.T,o=e.x,g=e.n,i=e.r},e=>{m=e.f},e=>{p=e.g,y=e.a,f=e.c},e=>{j=e._,h=e.a,_=e.t,V=e.b},e=>{b=e.r,v=e.I,T=e.j,U=e.o,w=e.c,k=e.M,x=e.Q,N=e.a,q=e.U,z=e.R,C=e.O,$=e.a8,D=e.V,R=e.W},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var l=document.createElement("style");l.textContent="[data-v-9092fe7c] .show .el-form-item__content{flex-direction:column;align-items:start}\n/*$vite$:1*/",document.head.appendChild(l);const E={class:"bg-fff pd-20 radius-6"},H={class:"flex w-full"},M={class:"flex w-full"},S={class:"flex w-full"},I=["href"],L={class:"flex w-full"},O={class:"f-15"},A=["innerHTML"];e("default",j({__name:"add",setup(e){const l=b(null),j=b("list"),B=b([]),P={checkStrictly:!0},Q=b([]),W=v({taskName:"",targetUrl:"",listTag:"",startNum:1,endNum:1,increment:1,pages:[],titleTag:"",articleTag:"",charset:"1",parseData:"return data;",status:"1",cid:1}),F=b([]),G=v({}),J=e=>{-1!==e[0]&&(W.cid=e[e.length-1])},K=async()=>{try{let{targetUrl:e,listTag:l,charset:t}=W,s=await p({targetUrl:e,listTag:l,charset:t});if(200===s.code){let l=s.data;const t=/^(.*:\/\/[^\/]+).*$/,r=e.match(t),u=r?r[1]:"";l[0].includes("http")||(l=l.map((e=>`${u}${e}`))),W.pages=l,a({message:"列表地址获取成功^_^",type:"success"})}}catch(e){console.log(e)}},X=async()=>{try{let{targetUrl:e,startNum:l,endNum:a,increment:t}=W,s=[];for(let r=l;r<=a;r+=t){let l=e.replace("${page}",r);s.push(l)}F.value=s,await Promise.all(F.value.map((async(e,l)=>{let{listTag:a,charset:t}=W;if(l>0){let l=await p({targetUrl:e,listTag:a,charset:t});200===l.code&&(W.pages=[...W.pages,...l.data])}})))}catch(e){console.log(e)}},Y=async()=>{try{let{titleTag:e,articleTag:l,parseData:t,charset:s}=W,r=W.pages[0]||"",u=await y({taskUrl:r,titleTag:e,articleTag:l,parseData:t,charset:s});200===u.code&&(G.title=u.data.title,G.article=u.data.article,a({message:"内容获取成功^_^",type:"success"}))}catch(e){console.log(e)}},Z=e=>{e.validate(((e,l)=>{if(!e)return V(l),!1;(async()=>{try{let e={...W};e.pages=W.pages.join(",");let l=await f(e);200===l.code?(a({message:"新增成功^_^",type:"success"}),ee()):a({message:l.msg,type:"error"})}catch(e){console.log(e)}})()}))},ee=()=>{window.history.back()};return T((()=>{(async()=>{try{let e=await m();if(200===e.code){let l=h(_(e.data));Q.value=[...l]}}catch(e){console.log(e)}})()})),(e,a)=>{const m=t,p=s,y=r,f=u,h=c,_=n,V=d,b=o,v=g,T=i;return U(),w("div",E,[k(T,{ref_key:"formRef",ref:l,model:W,"label-width":"84px"},{default:x((()=>[k(v,{modelValue:j.value,"onUpdate:modelValue":a[13]||(a[13]=e=>j.value=e),class:"demo-tabs"},{default:x((()=>[k(_,{label:"列表测试",name:"list"},{default:x((()=>[k(p,{label:"任务名称",prop:"taskName",rules:[{required:!0,message:"请输入任务名称",trigger:"blur"}]},{default:x((()=>[k(m,{modelValue:W.taskName,"onUpdate:modelValue":a[0]||(a[0]=e=>W.taskName=e),placeholder:"例：前端库-chat问答"},null,8,["modelValue"])])),_:1}),k(p,{label:"列表网址",prop:"targetUrl",rules:[{required:!0,message:"请输入匹配网址",trigger:"blur"}]},{default:x((()=>[N("div",H,[k(m,{class:"flex-1",modelValue:W.targetUrl,"onUpdate:modelValue":a[1]||(a[1]=e=>W.targetUrl=e),placeholder:"/SEO/1_${page}.html"},null,8,["modelValue"])])])),_:1}),k(p,{label:"字符集",prop:"charset",rules:[{required:!0,message:"请选择字符集",trigger:"blur"}]},{default:x((()=>[k(f,{modelValue:W.charset,"onUpdate:modelValue":a[2]||(a[2]=e=>W.charset=e),class:"ml-4"},{default:x((()=>[k(y,{value:"1",size:"large"},{default:x((()=>a[14]||(a[14]=[q("uft-8")]))),_:1}),k(y,{value:"2",size:"large"},{default:x((()=>a[15]||(a[15]=[q("gb2312")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),k(p,{label:"列表链接",prop:"listTag",rules:[{required:!0,message:"请输入文章列表标签",trigger:"blur"}]},{default:x((()=>[N("div",M,[k(m,{class:"flex-1",modelValue:W.listTag,"onUpdate:modelValue":a[3]||(a[3]=e=>W.listTag=e),placeholder:"例：.content h4 a"},null,8,["modelValue"]),k(h,{class:"ml-5",type:"primary",onClick:K},{default:x((()=>a[16]||(a[16]=[q(" 测试 ")]))),_:1})])])),_:1}),k(p,{label:"开始页面"},{default:x((()=>[N("div",S,[k(m,{class:"flex-1",modelValue:W.startNum,"onUpdate:modelValue":a[4]||(a[4]=e=>W.startNum=e)},null,8,["modelValue"]),a[18]||(a[18]=N("span",{class:"ml-5 mr-5"},"至",-1)),k(m,{class:"flex-1",modelValue:W.endNum,"onUpdate:modelValue":a[5]||(a[5]=e=>W.endNum=e)},null,8,["modelValue"]),a[19]||(a[19]=N("span",{class:"ml-5 mr-5"},"每页递增",-1)),k(m,{class:"flex-1 mr-5",modelValue:W.increment,"onUpdate:modelValue":a[6]||(a[6]=e=>W.increment=e)},null,8,["modelValue"]),k(h,{type:"primary",onClick:X},{default:x((()=>a[17]||(a[17]=[q("测试")]))),_:1})])])),_:1}),F.value.length>0?(U(),z(p,{key:0,label:"列表地址"},{default:x((()=>[(U(!0),w(C,null,$(F.value,((e,l)=>(U(),w("p",{class:"mr-30",key:l},D(e),1)))),128))])),_:1})):R("",!0),W.pages.length>0?(U(),z(p,{key:1,label:"文章地址"},{default:x((()=>[(U(!0),w(C,null,$(W.pages,((e,l)=>(U(),w("p",{class:"mr-30",key:l},D(e),1)))),128))])),_:1})):R("",!0)])),_:1}),k(_,{label:"内容测试",name:"article"},{default:x((()=>[k(p,{label:"目标地址"},{default:x((()=>[N("a",{class:"mr-10",href:W.pages[0],target:"_blank"},D(W.pages[0]),9,I),a[20]||(a[20]=q("（默认第一个作为测试） "))])),_:1}),k(p,{label:"文章标题",prop:"titleTag",rules:[{required:!0,message:"请输入文章标题",trigger:"blur"}]},{default:x((()=>[k(m,{class:"flex-1",placeholder:"例：.title",modelValue:W.titleTag,"onUpdate:modelValue":a[7]||(a[7]=e=>W.titleTag=e)},null,8,["modelValue"])])),_:1}),k(p,{label:"文章内容",prop:"articleTag",rules:[{required:!0,message:"请输入文章内容",trigger:"blur"}]},{default:x((()=>[k(m,{placeholder:"例：.article",modelValue:W.articleTag,"onUpdate:modelValue":a[8]||(a[8]=e=>W.articleTag=e)},null,8,["modelValue"])])),_:1}),k(p,{label:"处理函数",prop:"parseData",rules:[{required:!0,message:"如果无特殊处理，请直接填写 return data;",trigger:"blur"}]},{default:x((()=>[N("div",L,[k(m,{class:"flex-1",type:"textarea",rows:13,modelValue:W.parseData,"onUpdate:modelValue":a[9]||(a[9]=e=>W.parseData=e),placeholder:"如果不做任何处理，直接返回data。拿到的文本是变量是data,可以直接js函数可以处理成需要的数据，最终需要返回data。例：\n            data = data.replaceAll('<BR>','<br/>');\n            return data;\n            //或\n            return data;\n            "},null,8,["modelValue"]),k(h,{class:"ml-5",type:"primary",onClick:Y},{default:x((()=>a[21]||(a[21]=[q(" 测试 ")]))),_:1})])])),_:1}),G.title?(U(),z(p,{key:0,label:"采集结果"},{default:x((()=>[k(V,{class:"w-full",shadow:"never"},{header:x((()=>[N("p",O,[a[22]||(a[22]=N("span",{class:"c-999"},"标题：",-1)),q(D(G.title),1)])])),default:x((()=>[a[23]||(a[23]=N("p",{class:"f-15"},[N("span",{class:"c-999"},"内容：")],-1)),N("div",{class:"f-15 article",innerHTML:G.article},null,8,A)])),_:1})])),_:1})):R("",!0)])),_:1}),k(_,{label:"保存配置",name:"save"},{default:x((()=>[k(p,{label:"保存栏目",prop:"articleTag",rules:[{required:!0,message:"请输入保存栏目",trigger:"blur"}]},{default:x((()=>[k(b,{props:P,"show-all-levels":!1,modelValue:B.value,"onUpdate:modelValue":a[10]||(a[10]=e=>B.value=e),options:Q.value,onChange:J},null,8,["modelValue","options"])])),_:1}),k(p,{label:"发布状态",prop:"status",rules:[{required:!0,message:"请选择字符集",trigger:"blur"}]},{default:x((()=>[k(f,{modelValue:W.status,"onUpdate:modelValue":a[11]||(a[11]=e=>W.status=e),class:"ml-4"},{default:x((()=>[k(y,{value:"1",size:"large"},{default:x((()=>a[24]||(a[24]=[q("草稿")]))),_:1}),k(y,{value:"2",size:"large"},{default:x((()=>a[25]||(a[25]=[q("发布")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),k(p,null,{default:x((()=>[k(h,{type:"primary",onClick:a[12]||(a[12]=e=>Z(l.value))},{default:x((()=>a[26]||(a[26]=[q("保存")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["model"])])}}},[["__scopeId","data-v-9092fe7c"]]))}}}));
