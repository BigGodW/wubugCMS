import{E as v,s as D,t as M,f as P,r as $,O as Q,N as U,P as z,Q as G,w as H}from"./element-plus.js";import{u as O}from"./vue-router.js";import{G as q,H as J,E as K}from"./@element-plus.js";import{s as k,a as L}from"./frag.js";import{_ as W}from"./index.js";import{r as s,I as X,j as Y,ad as Z,o as ee,c as oe,a as p,M as e,Q as r,u,U as d,V as te}from"./@vue.js";import"./lodash-es.js";import"./async-validator.js";import"./dayjs.js";import"./@popperjs.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vanilla-jsoneditor.js";import"./json-source-map.js";import"./@jsonquerylang.js";import"./@fortawesome.js";import"./natural-compare-lite.js";import"./@codemirror.js";import"./@lezer.js";import"./crelt.js";import"./style-mod.js";import"./w3c-keyname.js";import"./@replit.js";import"./codemirror-wrapped-line-indent.js";import"./fast-deep-equal.js";import"./fast-uri.js";import"./jmespath.js";import"./jsonpath-plus.js";import"./immutable-json-patch.js";import"./jsonrepair.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css        */const re={class:"bg-fff radius-6 pd-20 mb-10"},ne={class:"bg-fff pd-20 radius-6"},le={class:"flex justify-end"},ae={class:"inline-b ml-5"},se={__name:"index",setup(ie){const w=O(),f=s(null),h=s(null),m=X({keywords:""}),_=s([]),C=s([]),g=s(0),y=s(1),x=o=>{f.value.resetFields(),i()},i=async()=>{try{const o=await k(y.value,m.keywords);o.code===200&&(_.value=o.data.list,g.value=o.data.count)}catch(o){console.log(o)}},E=o=>{y.value=o,i()},R=o=>{C.value=o},V=o=>{const t=o.id;w.push({name:"frag-edit",params:{id:t}})},S=async o=>{const t=o.id;try{const l=await L(t);l.code===200?(v({message:"文章删除成功 ^_^",type:"success"}),k()):v({message:l.msg,type:"error"})}catch(l){console.log(l)}};return Y(()=>{i()}),(o,t)=>{const l=D,b=M,c=P,T=$,B=Z("router-link"),a=Q,F=U,I=z,N=G,j=H;return ee(),oe("div",null,[p("div",re,[e(T,{inline:!0,model:m,ref_key:"formRef",ref:f},{default:r(()=>[e(b,{label:"标题",prop:"keywords"},{default:r(()=>[e(l,{placeholder:"请输入内容","suffix-icon":u(q),clearable:"",onClear:i,modelValue:m.keywords,"onUpdate:modelValue":t[0]||(t[0]=n=>m.keywords=n)},null,8,["suffix-icon","modelValue"])]),_:1}),e(b,null,{default:r(()=>[e(c,{type:"primary",onClick:i,round:""},{default:r(()=>t[2]||(t[2]=[d("搜索")])),_:1}),e(c,{onClick:t[1]||(t[1]=n=>x("formRef")),round:""},{default:r(()=>t[3]||(t[3]=[d("清空")])),_:1})]),_:1})]),_:1},8,["model"])]),p("div",ne,[p("div",le,[e(B,{class:"mt-10",to:"/frag/add"},{default:r(()=>[e(c,{type:"primary",round:""},{default:r(()=>t[4]||(t[4]=[d("新增")])),_:1})]),_:1})]),e(I,{ref_key:"multipleTableRef",ref:h,data:_.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:R},{default:r(()=>[e(a,{type:"selection"}),e(a,{prop:"id",width:"60",label:"编号"}),e(a,{prop:"name",label:"名称"}),e(a,{prop:"mark",label:"标识"}),e(a,{prop:"createdAt",label:"发布时间"},{default:r(n=>[d(te(n.row.createdAt),1)]),_:1}),e(a,{fixed:"right",width:"120",label:"操作"},{default:r(n=>[e(c,{icon:u(J),circle:"",onClick:A=>V(n.row)},null,8,["icon","onClick"]),p("div",ae,[e(F,{width:"220",onConfirm:A=>S(n.row),"confirm-button-text":"确定","cancel-button-text":"取消","icon-color":"#626AEF",title:"确定删除吗？如果在使用，删掉会模板会报错"},{reference:r(()=>[e(c,{icon:u(K),circle:""},null,8,["icon"])]),_:2},1032,["onConfirm"])])]),_:1})]),_:1},8,["data"])]),e(j,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:r(()=>[e(N,{background:"",layout:"prev, pager, next",onCurrentChange:E,"page-size":20,total:g.value,"hide-on-single-page":""},null,8,["total"])]),_:1})])}}},qe=W(se,[["__scopeId","data-v-2e24508c"]]);export{qe as default};
