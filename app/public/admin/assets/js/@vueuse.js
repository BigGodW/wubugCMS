import{g as G,b as P,u as W,r as X,w as h,e as q}from"./@vue.js";function z(e){return G()?(P(e),!0):!1}function c(e){return typeof e=="function"?e():W(e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function B(e,t=!1,u="Timeout"){return new Promise((a,o)=>{setTimeout(t?()=>o(u):a,e)})}function C(e){return e}function E([e,t,u,a]){const o=(n,r)=>1-3*r+3*n,l=(n,r)=>3*r-6*n,s=n=>3*n,f=(n,r,i)=>((o(r,i)*n+l(r,i))*n+s(r))*n,d=(n,r,i)=>3*o(r,i)*n*n+2*l(r,i)*n+s(r),v=n=>{let r=n;for(let i=0;i<4;++i){const m=d(r,e,u);if(m===0)return r;const y=f(r,e,u)-n;r-=y/m}return r};return n=>e===t&&u===a?n:f(v(n),t,a)}function k(e,t,u){return e+u*(t-e)}function w(e){return(typeof e=="number"?[e]:e)||[]}function I(e,t,u,a={}){var o,l;const s=c(t),f=c(u),d=w(s),v=w(f),n=(o=c(a.duration))!=null?o:1e3,r=Date.now(),i=Date.now()+n,m=typeof a.transition=="function"?a.transition:(l=c(a.transition))!=null?l:C,y=typeof m=="function"?m:E(m);return new Promise(T=>{e.value=s;const S=()=>{var _;if((_=a.abort)!=null&&_.call(a)){T();return}const A=Date.now(),g=y((A-r)/n),p=w(e.value).map((F,b)=>k(d[b],v[b],g));Array.isArray(e.value)?e.value=p.map((F,b)=>{var V,D;return k((V=d[b])!=null?V:0,(D=v[b])!=null?D:0,g)}):typeof e.value=="number"&&(e.value=p[0]),A<i?requestAnimationFrame(S):(e.value=f,T())};S()})}function R(e,t={}){let u=0;const a=()=>{const l=c(e);return typeof l=="number"?l:l.map(c)},o=X(a());return h(a,async l=>{var s,f;if(c(t.disabled))return;const d=++u;if(t.delay&&await B(c(t.delay)),d!==u)return;const v=Array.isArray(l)?l.map(c):c(l);(s=t.onStarted)==null||s.call(t),await I(o,o.value,v,{...t,abort:()=>{var n;return d!==u||((n=t.abort)==null?void 0:n.call(t))}}),(f=t.onFinished)==null||f.call(t)},{deep:!0}),h(()=>c(t.disabled),l=>{l&&(u++,o.value=a())}),z(()=>{u++}),q(()=>c(t.disabled)?a():o.value)}export{R as u};
