import{E as y,s as R,t as N,f as j,r as F,P as L,Q,M as U}from"./element-plus.js";import{G as q,v as G,H,E as P}from"./@element-plus.js";import{s as z,b as A,d as J}from"./category.js";import{_ as K,t as O,a as W}from"./index.js";import{u as X}from"./vue-router.js";import{I as Y,r as p,j as Z,ad as ee,o as s,c,a as h,M as t,Q as a,u as m,U as u,_ as te,R as oe,V as ae}from"./@vue.js";import"./lodash-es.js";import"./async-validator.js";import"./dayjs.js";import"./@popperjs.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vanilla-jsoneditor.js";import"./json-source-map.js";import"./@jsonquerylang.js";import"./@fortawesome.js";import"./natural-compare-lite.js";import"./@codemirror.js";import"./@lezer.js";import"./crelt.js";import"./style-mod.js";import"./w3c-keyname.js";import"./@replit.js";import"./codemirror-wrapped-line-indent.js";import"./fast-deep-equal.js";import"./fast-uri.js";import"./jmespath.js";import"./jsonpath-plus.js";import"./immutable-json-patch.js";import"./jsonrepair.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css        */const re={class:"bg-fff radius-6 pd-20 mb-10"},le={class:"bg-fff radius-6 pd-20"},ne={class:"flex justify-end"},se={key:0},ie={key:1},ce={key:0},de={key:1},pe={__name:"index",setup(me){const i=Y({keywords:""}),g=p(!0),_=p([]),v=p(null),C=p([]),x=X(),k=()=>{i.keywords="",_.value=[],C.value=[],f()},f=async()=>{try{const o=i.keywords,e=await z(o);if(e.code===200){const d=O(e.data);_.value=W(d),g.value=!1}}catch(o){console.log(o)}},E=o=>{const e=o.id;x.push({name:"category-edit",params:{id:e}})},V=async o=>{try{const e=await A(o);if(e.code===200)return e.data.length>0}catch(e){console.log(e)}return!1},$=async o=>{try{const e=await J(o);e.code===200?(y({message:"删除成功 ^_^",type:"success"}),k()):y({message:e.msg,type:"error"})}catch(e){console.log(e)}},B=o=>{let e;o.type===0?e="".concat(location.origin).concat(o.path,"/index.html"):e="".concat(location.origin).concat(o.path,"/page.html"),window.open(e)},S=async o=>{const e=o.id;if(await V(e)){y({message:"我下面还有栏目啊 ^_^",type:"warning"});return}$(e)};return Z(()=>{f()}),(o,e)=>{const d=R,w=N,n=j,I=F,T=ee("router-link"),l=L,D=Q,M=U;return s(),c("div",null,[h("div",re,[t(I,{inline:!0,model:i},{default:a(()=>[t(w,{label:"名称",prop:"keywords"},{default:a(()=>[t(d,{placeholder:"请输入栏目名称","suffix-icon":m(q),modelValue:i.keywords,"onUpdate:modelValue":e[0]||(e[0]=r=>i.keywords=r),clearable:""},null,8,["suffix-icon","modelValue"])]),_:1}),t(w,null,{default:a(()=>[t(n,{type:"primary",onClick:f,round:""},{default:a(()=>e[1]||(e[1]=[u("搜索")])),_:1}),t(n,{onClick:k,round:""},{default:a(()=>e[2]||(e[2]=[u("清空")])),_:1})]),_:1})]),_:1},8,["model"])]),h("div",le,[h("div",ne,[t(T,{to:"/category/add"},{default:a(()=>[t(n,{type:"primary",round:""},{default:a(()=>e[3]||(e[3]=[u("新增")])),_:1})]),_:1})]),te((s(),oe(D,{ref_key:"multipleTableRef",ref:v,data:_.value,"tooltip-effect":"dark","row-key":"name","tree-props":{children:"children",hasChildren:"hasChildren"},onSelectionChange:o.handleSelectionChange},{default:a(()=>[t(l,{type:"selection"}),t(l,{prop:"name",label:"栏目名称",width:"140"}),t(l,{prop:"id",align:"center",label:"编号"}),t(l,{prop:"type",label:"类型",width:"80"},{default:a(r=>[r.row.type==0?(s(),c("p",se,"栏目")):(s(),c("p",ie,"单页"))]),_:1}),t(l,{prop:"orderBy",align:"center",label:"排序"},{default:a(r=>[u(ae(r.row.orderBy),1)]),_:1}),t(l,{prop:"status",label:"状态"},{default:a(r=>[r.row.status==0?(s(),c("p",ce,"显示")):(s(),c("p",de,"隐藏"))]),_:1}),t(l,{fixed:"right",label:"操作",width:"160"},{default:a(r=>[t(n,{icon:m(G),circle:"",onClick:b=>B(r.row)},null,8,["icon","onClick"]),t(n,{icon:m(H),circle:"",onClick:b=>E(r.row)},null,8,["icon","onClick"]),t(n,{icon:m(P),circle:"",onClick:b=>S(r.row)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[M,g.value]])])])}}},We=K(pe,[["__scopeId","data-v-22800c3b"]]);export{We as default};
