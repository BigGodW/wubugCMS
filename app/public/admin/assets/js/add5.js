import{s as C,t as I,H as M,R as N,f as F,r as j,L,E as g}from"./element-plus.js";import{u as S}from"./vue-router.js";import{c as T}from"./frag.js";import{t as q,_ as D}from"./tinymce.js";import{p as G}from"./pinyin-pro.js";import{u as H}from"./upload.js";import{_ as Q}from"./index.js";import{r as y,I as i,w as W,j as $,o as s,c as z,_ as A,R as u,Q as a,a as J,M as o,U as d,W as V}from"./@vue.js";import"./lodash-es.js";import"./async-validator.js";import"./dayjs.js";import"./@element-plus.js";import"./@popperjs.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./sys_config.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vanilla-jsoneditor.js";import"./json-source-map.js";import"./@jsonquerylang.js";import"./@fortawesome.js";import"./natural-compare-lite.js";import"./@codemirror.js";import"./@lezer.js";import"./crelt.js";import"./style-mod.js";import"./w3c-keyname.js";import"./@replit.js";import"./codemirror-wrapped-line-indent.js";import"./fast-deep-equal.js";import"./fast-uri.js";import"./jmespath.js";import"./jsonpath-plus.js";import"./immutable-json-patch.js";import"./jsonrepair.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css        */const K={class:"bg-fff pd-20 radius-6"},O={__name:"add",setup(P){const b=S(),c=y(null),f=i(q),n=y(!0),e=i({type:1,name:"",mark:"",content:"欢迎使用ChanCMS系统"}),k=i({name:[{required:!0,message:"请输入栏目名称",trigger:"blur"},{min:2,max:50,message:"名称长度在 2 到 50 个字符之间",trigger:"blur"}]});W(()=>e.name,r=>{e.mark=G(r,{toneType:"none"}).replace(/\s+/g,"")}),$(async()=>{f.images_upload_url=await H(),n.value=!1});const v=()=>{n.value=!1},x=async()=>{try{const r=await T(e);r.code===200?(g({message:"新增成功^_^",type:"success"}),b.go(-1)):g({message:r.msg,type:"error"})}catch(r){console.log(r)}},E=()=>{c.value.validate(r=>{if(r)x();else return console.log("error submit!!"),!1})};return(r,t)=>{const p=C,m=I,_=M,w=N,R=F,U=j,B=L;return s(),z("div",K,[A((s(),u(U,{ref_key:"formRef",ref:c,model:e,rules:k,"label-width":"84px",class:"mt-20"},{default:a(()=>[J("div",null,[o(m,{label:"碎片名称",prop:"name"},{default:a(()=>[o(p,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=l=>e.name=l),placeholder:"请输入汉字"},null,8,["modelValue"])]),_:1}),o(m,{label:"碎片标识",prop:"mark"},{default:a(()=>[o(p,{modelValue:e.mark,"onUpdate:modelValue":t[1]||(t[1]=l=>e.mark=l),placeholder:"模板使用标识"},null,8,["modelValue"])]),_:1}),o(m,{label:"碎片类型",prop:"type"},{default:a(()=>[o(w,{modelValue:e.type,"onUpdate:modelValue":t[2]||(t[2]=l=>e.type=l),class:"ml-4"},{default:a(()=>[o(_,{label:1},{default:a(()=>t[5]||(t[5]=[d("富文本")])),_:1}),o(_,{label:2},{default:a(()=>t[6]||(t[6]=[d("文本框")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e.type===1?(s(),u(m,{key:0,label:"碎片内容"},{default:a(()=>[o(D,{modelValue:e.content,"onUpdate:modelValue":t[3]||(t[3]=l=>e.content=l),setting:f,onInit:v,"script-src":"/public/admin/tinymce/tinymce.min.js"},null,8,["modelValue","setting"])]),_:1})):V("",!0),e.type===2?(s(),u(m,{key:1,label:"碎片内容"},{default:a(()=>[o(p,{type:"textarea",prop:"textarea",class:"textarea",rows:3,modelValue:e.content,"onUpdate:modelValue":t[4]||(t[4]=l=>e.content=l)},null,8,["modelValue"])]),_:1})):V("",!0)]),o(m,null,{default:a(()=>[o(R,{type:"primary",onClick:E},{default:a(()=>t[7]||(t[7]=[d("保存")])),_:1})]),_:1})]),_:1},8,["model","rules"])),[[B,n.value]])])}}},qe=Q(O,[["__scopeId","data-v-d0ac4100"]]);export{qe as default};
