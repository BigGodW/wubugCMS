import{E as c,f as P,w as V,P as j,a as D,S as M,Q as N,R as I}from"./element-plus.js";import{l as Q,a as $}from"./sys_role.js";import{u as q}from"./vue-router.js";import{H as z,E as H,B as U}from"./@element-plus.js";import{_ as W}from"./index.js";import{r,j as A,ad as F,o as f,c as G,M as t,Q as o,U as g,V as J,u as p,R as K,W as L}from"./@vue.js";import"./lodash-es.js";import"./async-validator.js";import"./dayjs.js";import"./@popperjs.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vanilla-jsoneditor.js";import"./json-source-map.js";import"./@jsonquerylang.js";import"./@fortawesome.js";import"./natural-compare-lite.js";import"./@codemirror.js";import"./@lezer.js";import"./crelt.js";import"./style-mod.js";import"./w3c-keyname.js";import"./@replit.js";import"./codemirror-wrapped-line-indent.js";import"./fast-deep-equal.js";import"./fast-uri.js";import"./jmespath.js";import"./jsonpath-plus.js";import"./immutable-json-patch.js";import"./jsonrepair.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css        */const O={class:"pd-20 bg-fff radius-6 bg-fff"},X={__name:"index",setup(Y){const b=q(),y=r(null),m=r([]),h=r([]),d=r(0),u=r(1),i=async()=>{try{const e=await Q(u.value);e.code===200?(m.value=[...e.data.list],d.value=e.data.count):c({message:e.msg,type:"success"})}catch(e){console.log(e)}},w=e=>{u.value=e,i()},k=e=>{h.value=e},v=e=>{const n=e.id;b.push({name:"role-edit",params:{id:n}})},C=async e=>{const n=e.id;try{const a=await $(n);a.code===200?(c({message:"删除成功 ^_^",type:"success"}),i()):c({message:a.msg,type:"success"})}catch(a){console.log(a)}};return A(()=>{i()}),(e,n)=>{const a=P,E=F("router-link"),_=V,s=j,x=D,R=M,T=N,B=I;return f(),G("div",O,[t(_,{type:"flex",class:"mt-10 mb-10",justify:"end"},{default:o(()=>[t(E,{to:"/role/add"},{default:o(()=>[t(a,{type:"primary",round:""},{default:o(()=>n[0]||(n[0]=[g("新增")])),_:1})]),_:1})]),_:1}),t(T,{ref_key:"multipleTableRef",ref:y,data:m.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:k},{default:o(()=>[t(s,{type:"selection"}),t(s,{prop:"id",width:"100",label:"编号"}),t(s,{prop:"name",width:"300",label:"名称"}),t(s,{prop:"value",label:"角色"}),t(s,{prop:"status",label:"状态"},{default:o(l=>[g(J(l.row.status=="1"?"正常":"停用"),1)]),_:1}),t(s,{fixed:"right",width:"150",label:"操作"},{default:o(l=>[t(a,{icon:p(z),disabled:l.row.id<4,circle:"",onClick:S=>v(l.row)},null,8,["icon","disabled","onClick"]),t(a,{icon:p(H),disabled:l.row.id<4,circle:"",onClick:S=>C(l.row)},null,8,["icon","disabled","onClick"]),l.row.id<4?(f(),K(R,{key:0,content:"系统默认角色，禁止删除",effect:"light",placement:"top-start"},{default:o(()=>[t(x,{class:"ml-10 t-4 pointer"},{default:o(()=>[t(p(U),{class:"c-165dff"})]),_:1})]),_:1})):L("",!0)]),_:1})]),_:1},8,["data"]),t(_,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:o(()=>[t(B,{background:"",layout:"prev, pager, next",onCurrentChange:w,"page-size":10,total:d.value,"hide-on-single-page":""},null,8,["total"])]),_:1})])}}},It=W(X,[["__scopeId","data-v-cc97c82f"]]);export{It as default};
