import{E as c,f as D,w as R,P as j,G as M,D as N,Q as P,R as S}from"./element-plus.js";import{u as V}from"./vue-router.js";import{H as Q,E as $}from"./@element-plus.js";import{l as z,a as G}from"./slide.js";import{r as i,j as H,ad as I,o as f,c as W,M as e,Q as o,U as q,R as A,W as F,u as g}from"./@vue.js";import"./lodash-es.js";import"./async-validator.js";import"./dayjs.js";import"./@popperjs.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./index.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vanilla-jsoneditor.js";import"./json-source-map.js";import"./@jsonquerylang.js";import"./@fortawesome.js";import"./natural-compare-lite.js";import"./@codemirror.js";import"./@lezer.js";import"./crelt.js";import"./style-mod.js";import"./w3c-keyname.js";import"./@replit.js";import"./codemirror-wrapped-line-indent.js";import"./fast-deep-equal.js";import"./fast-uri.js";import"./jmespath.js";import"./jsonpath-plus.js";import"./immutable-json-patch.js";import"./jsonrepair.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css        */const J={class:"pd-20 bg-fff radius-6"},Me={__name:"index",setup(K){const h=V(),p=i([]),y=i([]),m=i(0),u=i(1),s=async()=>{try{const t=await z(u.value);t.code===200?(p.value=[...t.data.list],m.value=t.data.count):c({message:t.msg,type:"error"})}catch(t){console.log(t)}},b=t=>{u.value=t,s()},v=t=>{y.value=t},k=t=>{const l=t.id;h.push({name:"slide-edit",params:{id:l}})},w=async t=>{const l=t.id;try{const r=await G(l);r.code===200?(c({message:"删除成功 ^_^",type:"success"}),s()):c({message:r.msg,type:"error"})}catch(r){console.log(r)}},C=i(null);return H(()=>{s()}),(t,l)=>{const r=D,E=I("router-link"),d=R,a=j,_=M,x=N,U=P,T=S;return f(),W("div",J,[e(d,{type:"flex",class:"mt-10 mb-10",justify:"end"},{default:o(()=>[e(E,{to:"/slide/add"},{default:o(()=>[e(r,{type:"primary",round:""},{default:o(()=>l[0]||(l[0]=[q("新增")])),_:1})]),_:1})]),_:1}),e(U,{ref_key:"multipleTable",ref:C,data:p.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:v},{default:o(()=>[e(a,{type:"selection"}),e(a,{prop:"id",label:"编号"}),e(a,{prop:"title",label:"标题"}),e(a,{prop:"imgUrl",label:"图片链接"},{default:o(n=>[n.row.imgUrl?(f(),A(x,{key:0,placement:"right",width:600,trigger:"hover"},{reference:o(()=>[e(_,{class:"avatar-uploader-icon pointer ml-10",src:n.row.imgUrl},null,8,["src"])]),default:o(()=>[e(_,{style:{width:"100%"},src:n.row.imgUrl},null,8,["src"])]),_:2},1024)):F("",!0)]),_:1}),e(a,{prop:"linkUrl",label:"跳转链接"}),e(a,{fixed:"right",width:"100",label:"操作"},{default:o(n=>[e(r,{icon:g(Q),circle:"",onClick:B=>k(n.row)},null,8,["icon","onClick"]),e(r,{icon:g($),circle:"",onClick:B=>w(n.row)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"]),e(d,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:o(()=>[e(T,{background:"",layout:"prev, pager, next",onCurrentChange:b,"page-size":10,total:m.value,"hide-on-single-page":""},null,8,["total"])]),_:1})])}}};export{Me as default};
