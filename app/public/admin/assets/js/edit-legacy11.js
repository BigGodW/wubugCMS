System.register(["./element-plus-legacy.js","./vue-router-legacy.js","./slide-legacy.js","./upload-legacy.js","./@vue-legacy.js","./lodash-es-legacy.js","./async-validator-legacy.js","./dayjs-legacy.js","./@element-plus-legacy.js","./@popperjs-legacy.js","./@ctrl-legacy.js","./memoize-one-legacy.js","./normalize-wheel-es-legacy.js","./index-legacy.js","./pinia-legacy.js","./pinia-plugin-persist-legacy.js","./vanilla-jsoneditor-legacy.js","./json-source-map-legacy.js","./@jsonquerylang-legacy.js","./@fortawesome-legacy.js","./natural-compare-lite-legacy.js","./@codemirror-legacy.js","./@lezer-legacy.js","./crelt-legacy.js","./style-mod-legacy.js","./w3c-keyname-legacy.js","./@replit-legacy.js","./codemirror-wrapped-line-indent-legacy.js","./fast-deep-equal-legacy.js","./fast-uri-legacy.js","./jmespath-legacy.js","./jsonpath-plus-legacy.js","./immutable-json-patch-legacy.js","./jsonrepair-legacy.js","./axios-legacy.js","./js-cookie-legacy.js","./nprogress-legacy.js","./saduocss-legacy.js","./sys_config-legacy.js"],(function(l,e){"use strict";var a,s,t,n,r,c,u,o,i,g,d,y,m,j,p,f,h,U,_,w,v,k,b,V,x;return{setters:[l=>{a=l.E,s=l.s,t=l.t,n=l.a,r=l.D,c=l.F,u=l.G,o=l.f,i=l.r},l=>{g=l.a,d=l.u},l=>{y=l.d,m=l.u},l=>{j=l.a},l=>{p=l.r,f=l.I,h=l.j,U=l.ad,_=l.o,w=l.c,v=l.M,k=l.Q,b=l.R,V=l.W,x=l.U},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const e={class:"bg-fff pd-20 radius-6"};l("default",{__name:"edit",setup(l){const q=g(),z=d(),C=p(null),D=f({id:0,title:"",imgUrl:"",linkUrl:""});function F(l){return-1===l.type.indexOf("image")?(a("上传文件只能是图片格式"),!1):!(l.size/1024>200&&(a("上传图片必须小于200k"),1))}async function I(l){const e=new FormData;e.append("file",l.file);try{let l=await j(e);200===l.code&&(D.imgUrl=l.data.path)}catch(a){console.error(a)}}function M(){C.value.validate((l=>{if(!l)return console.log("error submit!!"),!1;!async function(){try{let l=await m(D);200==l.code?(a({message:"更新成功^_^",type:"success"}),z.go(-1)):a({message:l.msg,type:"error"})}catch(l){console.log(l)}}()}))}return h((async()=>{D.id=parseInt(q.params.id,10),await async function(){try{let l=await y(D.id);const{id:e,title:s,imgUrl:t,linkUrl:n}=l.data;200===l.code?Object.assign(D,{id:e,title:s,imgUrl:t,linkUrl:n}):a({message:l.msg,type:"error"})}catch(l){console.error(l)}}()})),(l,a)=>{const g=s,d=t,y=U("MostlyCloudy"),m=n,j=r,p=c,f=u,h=o,q=i;return _(),w("div",e,[v(q,{ref_key:"formRef",ref:C,model:D,"label-width":"84px",class:"mt-20"},{default:k((()=>[v(d,{label:"轮播标题",rules:[{required:!0,message:"请输入标题",trigger:"blur"}],prop:"title"},{default:k((()=>[v(g,{modelValue:D.title,"onUpdate:modelValue":a[0]||(a[0]=l=>D.title=l)},null,8,["modelValue"])])),_:1}),v(d,{class:"flex",label:"轮播图"},{default:k((()=>[v(p,{class:"avatar-uploader","http-request":I,"show-file-list":!1,"before-upload":F},{default:k((()=>[v(j,{placement:"top-start",title:"上传",width:200,trigger:"hover",content:"上传图片作为封面图，大小200k内"},{reference:k((()=>[v(m,{class:"avatar-uploader-icon"},{default:k((()=>[v(y)])),_:1})])),_:1})])),_:1}),D.imgUrl?(_(),b(j,{key:0,placement:"right",width:600,trigger:"hover"},{reference:k((()=>[v(f,{class:"avatar-uploader-icon pointer ml-10",src:D.imgUrl},null,8,["src"])])),default:k((()=>[v(f,{style:{width:"100%"},src:D.imgUrl},null,8,["src"])])),_:1})):V("",!0),v(g,{class:"ml-10 flex-1",modelValue:D.imgUrl,"onUpdate:modelValue":a[1]||(a[1]=l=>D.imgUrl=l)},null,8,["modelValue"])])),_:1}),v(d,{label:"轮播链接"},{default:k((()=>[v(g,{modelValue:D.linkUrl,"onUpdate:modelValue":a[2]||(a[2]=l=>D.linkUrl=l)},null,8,["modelValue"])])),_:1}),v(d,null,{default:k((()=>[v(h,{type:"primary",onClick:M},{default:k((()=>a[3]||(a[3]=[x("保存")]))),_:1})])),_:1})])),_:1},8,["model"])])}}})}}}));
