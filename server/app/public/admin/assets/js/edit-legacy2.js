System.register(["./element-plus-legacy.js","./@vue-legacy.js","./vue-router-legacy.js","./category-legacy.js","./article-legacy.js","./index-legacy.js","./model-legacy.js","./sys_config-legacy.js","./pinyin-pro-legacy.js","./lodash-es-legacy.js","./async-validator-legacy.js","./dayjs-legacy.js","./@element-plus-legacy.js","./@popperjs-legacy.js","./@ctrl-legacy.js","./memoize-one-legacy.js","./normalize-wheel-es-legacy.js","./pinia-legacy.js","./pinia-plugin-persist-legacy.js","./vanilla-jsoneditor-legacy.js","./json-source-map-legacy.js","./@jsonquerylang-legacy.js","./@fortawesome-legacy.js","./natural-compare-lite-legacy.js","./@codemirror-legacy.js","./@lezer-legacy.js","./crelt-legacy.js","./style-mod-legacy.js","./w3c-keyname-legacy.js","./@replit-legacy.js","./codemirror-wrapped-line-indent-legacy.js","./fast-deep-equal-legacy.js","./fast-uri-legacy.js","./jmespath-legacy.js","./jsonpath-plus-legacy.js","./immutable-json-patch-legacy.js","./jsonrepair-legacy.js","./axios-legacy.js","./js-cookie-legacy.js","./nprogress-legacy.js","./saduocss-legacy.js"],(function(e,l){"use strict";var a,u,t,o,s,d,n,c,i,r,m,p,y,g,V,v,f,j,h,b,_,w,U,k,x,S,z,C,E,T,O,q,B,D,K,R,A,I,Q,Z,$,F,H;return{setters:[e=>{a=e.m,u=e.n,t=e.x,o=e.t,s=e.s,d=e.I,n=e.J,c=e.H,i=e.R,r=e.a,m=e.S,p=e.f,y=e.r,g=e.E},e=>{V=e.r,v=e.I,f=e.j,j=e.ad,h=e.o,b=e.c,_=e.a,w=e.M,U=e.Q,k=e._,x=e.R,S=e.W,z=e.O,C=e.a8,E=e.U,T=e.$,O=e.V},e=>{q=e.a,B=e.u},e=>{D=e.f,K=e.a,R=e.u},e=>{A=e.s},e=>{I=e.b,Q=e.a,Z=e.t},e=>{$=e.l},e=>{F=e.v},e=>{H=e.p},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const l={class:"bg-fff radius-6 pd-20"},J={class:"mr-10 ml-10"},M={class:"mr-10 ml-10 mb-20"};e("default",{__name:"edit",setup(e){const W=q(),G=B(),L=V(W.params.id),N=V([]),P=V(""),X={checkStrictly:!0},Y=V("first"),ee=V("0"),le=V(null),ae=V([]),ue=V([]),te=V([]),oe=V(!1),se=V([]),de=v({pid:0,seoTitle:"",seoKeywords:"",seoDescription:"",name:"",path:"",pinyin:"",mid:"0",description:"",url:"",orderBy:0,type:"0",target:"0",status:"0",articleView:"",listView:""}),ne=e=>{de.pinyin=H(e,{toneType:"none"}).replace(/\s+/g,""),de.path=P.value?P.value+de.pinyin:"/"+P.value+de.pinyin},ce=e=>{de.path=P.value?P.value+e:"/"+P.value+e},ie=e=>{ee.value=e.index},re=e=>{let l=[];Object.values(e).forEach((e=>{ae.value.forEach((a=>{a.id==e&&l.push("/"+a.pinyin)}))})),P.value=l.join("")+"/",de.path=P.value+de.pinyin,-1!=e[0]&&(de.pid=e[e.length-1])},me=e=>{("article"==de.pinyin?(g({message:"不能使用article作为拼音",type:"success"}),0):/^[a-zA-Z][a-zA-Z0-9]*$/.test(de.pinyin)||(g({message:"拼音只能包含26个字母和数字，且首字母不能是数字",type:"success"}),0))&&(async()=>{try{let e=await R(de);e.code?(g({message:"更新成功^_^",type:"success"}),G.go(-1)):g({message:e.msg,type:"success"})}catch(e){console.log(e)}})()};return f((()=>{(async()=>{try{let e=await $();200===e.code&&(te.value=e.data.list.map((e=>(e.id=e.id.toString(),e))))}catch(e){console.log(e)}})(),(async()=>{try{let e=await D();if(200===e.code){let l=e.data;ae.value=e.data;let a=I(L.value,l);a.length>1&&(a.length=a.length-1),N.value=a;let u=Q(Z(l));ue.value=[...u]}}catch(e){console.log(e)}})(),(async()=>{try{let e=await K(L.value);if(200===e.code){Object.assign(de,e.data);let l=[];ae.value.forEach((a=>{a.id==e.data.pid&&l.push("/"+a.pinyin)})),P.value=l.join("")+"/"}}catch(e){console.error(e)}})(),(async()=>{try{let e=await A(1,"",L.value);200==e.code&&(oe.value=e.data.count>0)}catch(e){console.log(e)}})(),(async()=>{try{let e=await F();200===e.code&&(se.value=e.data.filter((e=>{if("404.html"!==e&&"500.html"!==e)return!0})).map((e=>({label:e,value:e}))))}catch(e){console.log(e)}})()})),(e,g)=>{const V=a,v=u,f=t,q=o,B=s,D=d,K=n,R=c,A=i,I=j("QuestionFilled"),Q=r,Z=m,$=p,F=y;return h(),b("div",l,[_("div",J,[w(v,{modelValue:Y.value,"onUpdate:modelValue":g[0]||(g[0]=e=>Y.value=e),onTabClick:ie},{default:U((()=>[w(V,{label:"基本信息",name:"first"}),w(V,{label:"SEO设置",name:"second"}),w(V,{label:"扩展信息",name:"third"})])),_:1},8,["modelValue"])]),_("div",M,[w(F,{ref_key:"paramsRef",ref:le,model:de,"label-width":"84px",class:"w640"},{default:U((()=>[k(_("div",null,[0!=de.pid?(h(),x(q,{key:0,label:"上级栏目"},{default:U((()=>[w(f,{props:X,"show-all-levels":!1,modelValue:N.value,"onUpdate:modelValue":g[1]||(g[1]=e=>N.value=e),options:ue.value,onChange:re,placeholder:"不选择为顶级栏目"},null,8,["modelValue","options"])])),_:1})):S("",!0),w(q,{label:"栏目名称",prop:"name",rules:[{required:!0,message:"请输入栏目名称",trigger:"blur"},{min:1,max:50,message:"栏目不能超过50个字",trigger:"blur"}]},{default:U((()=>[w(B,{modelValue:de.name,"onUpdate:modelValue":g[2]||(g[2]=e=>de.name=e),onChange:ne},null,8,["modelValue"])])),_:1}),w(q,{label:"栏目标识"},{default:U((()=>[w(B,{modelValue:de.pinyin,"onUpdate:modelValue":g[3]||(g[3]=e=>de.pinyin=e),onChange:ce,placeholder:"注：首页请填写home"},null,8,["modelValue"])])),_:1}),w(q,{label:"栏目路径"},{default:U((()=>[w(B,{modelValue:de.path,"onUpdate:modelValue":g[4]||(g[4]=e=>de.path=e),disabled:""},null,8,["modelValue"])])),_:1}),w(q,{label:"列表模板"},{default:U((()=>[w(K,{modelValue:de.listView,"onUpdate:modelValue":g[5]||(g[5]=e=>de.listView=e),placeholder:"Select"},{default:U((()=>[(h(!0),b(z,null,C(se.value,(e=>(h(),x(D,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),w(q,{label:"内容模板"},{default:U((()=>[w(K,{modelValue:de.articleView,"onUpdate:modelValue":g[6]||(g[6]=e=>de.articleView=e),placeholder:"Select"},{default:U((()=>[(h(!0),b(z,null,C(se.value,(e=>(h(),x(D,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),w(q,{label:"栏目类型"},{default:U((()=>[w(R,{modelValue:de.type,"onUpdate:modelValue":g[7]||(g[7]=e=>de.type=e),value:"0"},{default:U((()=>g[21]||(g[21]=[E("栏目")]))),_:1},8,["modelValue"]),w(R,{modelValue:de.type,"onUpdate:modelValue":g[8]||(g[8]=e=>de.type=e),value:"1"},{default:U((()=>g[22]||(g[22]=[E("单页")]))),_:1},8,["modelValue"])])),_:1}),w(q,{label:"是否显示"},{default:U((()=>[w(R,{modelValue:de.status,"onUpdate:modelValue":g[9]||(g[9]=e=>de.status=e),value:"0"},{default:U((()=>g[23]||(g[23]=[E("显示")]))),_:1},8,["modelValue"]),w(R,{modelValue:de.status,"onUpdate:modelValue":g[10]||(g[10]=e=>de.status=e),value:"1"},{default:U((()=>g[24]||(g[24]=[E("隐藏")]))),_:1},8,["modelValue"])])),_:1})],512),[[T,0==ee.value]]),k(_("div",null,[w(q,{label:"seo标题"},{default:U((()=>[w(B,{modelValue:de.seoTitle,"onUpdate:modelValue":g[11]||(g[11]=e=>de.seoTitle=e)},null,8,["modelValue"])])),_:1}),w(q,{label:"seo关键词"},{default:U((()=>[w(B,{modelValue:de.seoKeywords,"onUpdate:modelValue":g[12]||(g[12]=e=>de.seoKeywords=e)},null,8,["modelValue"])])),_:1}),w(q,{label:"seo描述"},{default:U((()=>[w(B,{type:"textarea",prop:"textarea",rows:2,modelValue:de.seoDescription,"onUpdate:modelValue":g[13]||(g[13]=e=>de.seoDescription=e)},null,8,["modelValue"])])),_:1})],512),[[T,1==ee.value]]),k(_("div",null,[w(q,{label:"栏目链接"},{default:U((()=>[w(B,{modelValue:de.url,"onUpdate:modelValue":g[14]||(g[14]=e=>de.url=e)},null,8,["modelValue"])])),_:1}),w(q,{label:"扩展模型"},{default:U((()=>[w(A,{modelValue:de.mid,"onUpdate:modelValue":g[15]||(g[15]=e=>de.mid=e)},{default:U((()=>[w(R,{value:"0"},{default:U((()=>g[25]||(g[25]=[E("基本模型")]))),_:1}),te.value.length>0?(h(!0),b(z,{key:0},C(te.value,((e,l)=>(h(),x(R,{disabled:oe.value,key:l,value:e.id},{default:U((()=>[E(O(e.model)+"模型 ",1)])),_:2},1032,["disabled","value"])))),128)):S("",!0)])),_:1},8,["modelValue"]),w(Z,{content:"如果栏目已经存在文章，则不能更换模型",effect:"light",placement:"top-start"},{default:U((()=>[w(Q,{class:"ml-20 pointer"},{default:U((()=>[w(I,{class:"c-165dff"})])),_:1})])),_:1})])),_:1}),w(q,{label:"打开方式"},{default:U((()=>[w(R,{modelValue:de.target,"onUpdate:modelValue":g[16]||(g[16]=e=>de.target=e),value:"0"},{default:U((()=>g[26]||(g[26]=[E("当前页面")]))),_:1},8,["modelValue"]),w(R,{modelValue:de.target,"onUpdate:modelValue":g[17]||(g[17]=e=>de.target=e),value:"1"},{default:U((()=>g[27]||(g[27]=[E("新页面")]))),_:1},8,["modelValue"])])),_:1}),w(q,{label:"栏目排序"},{default:U((()=>[w(B,{modelValue:de.orderBy,"onUpdate:modelValue":g[18]||(g[18]=e=>de.orderBy=e)},null,8,["modelValue"])])),_:1}),w(q,{label:"栏目描述"},{default:U((()=>[w(B,{type:"textarea",prop:"textarea",rows:2,modelValue:de.description,"onUpdate:modelValue":g[19]||(g[19]=e=>de.description=e)},null,8,["modelValue"])])),_:1})],512),[[T,2==ee.value]]),w(q,null,{default:U((()=>[w($,{type:"primary",onClick:g[20]||(g[20]=e=>me())},{default:U((()=>g[28]||(g[28]=[E("保存")]))),_:1})])),_:1})])),_:1},8,["model"])])])}}})}}}));
