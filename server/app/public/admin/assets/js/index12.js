import{d as a,o as e,p as s,q as o,r as t,s as r,f as l}from"./element-plus.js";import{h as i,A as p,_ as n,u as c}from"./index.js";import{g as m}from"./tool.js";import{K as u,o as d,c as g,a as h,T as f,V as j,Z as w,ay as y,az as _}from"./@vue.js";import"./lodash-es.js";import"./async-validator.js";import"./@vueuse.js";import"./dayjs.js";import"./@element-plus.js";import"./@ctrl.js";import"./@popperjs.js";import"./memoize-one.js";import"./escape-html.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vue-router.js";import"./axios.js";/* empty css        */import"./js-cookie.js";const v=u({data:()=>({loginForm:{username:"",password:"",captcha:""},loginRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],captcha:[{required:!0,message:"请输入验证码",trigger:"blur"}]},captcha:""}),created(){this.getCaptcha()},methods:{async getCaptcha(){try{let e=Math.random().toString().slice(4,8),s=await(a=e,i({url:`${p.BASE_API}/api/captcha?v=${a}`,method:"get"}));this.captcha=s}catch(e){console.log(e)}var a},async login(){const e=c();this.$refs.loginForm.validate((s=>{if(!s)return!1;{if(console.log(),this.loginForm.captcha.toLowerCase()!==m("captcha").toLowerCase())return a({message:"验证码错误",type:"warning"}),!1;const{username:s,password:o}=this.loginForm;e.login({username:s,password:o}).then((e=>{if(500==e.code)return a({message:"登录失败",type:"warning"}),!1;this.$router.push({path:this.$route.query.redirect||"/"})}))}}))}}}),F=a=>(y("data-v-819488aa"),a=a(),_(),a),V={class:"page"},b={class:"login"},C=F((()=>h("h1",{class:"title"},"禅悦cms后台管理系统",-1))),k={class:"login-cont"},q={class:"captcha-input"},x=["innerHTML"],$=F((()=>h("footer",{class:"login-footer"},[h("p",{class:"f-13 text-c"},[w(" © "),h("a",{href:"http://www.chanyue.top",class:"mr-5",target:"_blank",title:"chanyue"},"www.chanyue.top"),w(" 禅悦系统 ● 位于南京 服务全国 ")])],-1)));const L=n(v,[["render",function(a,i,p,n,c,m){const u=s,y=o,_=t,v=r,F=l,L=e;return d(),g("div",V,[h("div",b,[C,h("div",k,[f(L,{class:"mt-20",ref:"loginForm",model:a.loginForm,rules:a.loginRules,"label-width":"80px"},{default:j((()=>[f(y,{label:"用户名",prop:"username"},{default:j((()=>[f(u,{modelValue:a.loginForm.username,"onUpdate:modelValue":i[0]||(i[0]=e=>a.loginForm.username=e)},null,8,["modelValue"])])),_:1}),f(y,{label:"密码",prop:"password"},{default:j((()=>[f(u,{type:"password",modelValue:a.loginForm.password,"onUpdate:modelValue":i[1]||(i[1]=e=>a.loginForm.password=e)},null,8,["modelValue"])])),_:1}),f(y,{label:"验证码",prop:"captcha"},{default:j((()=>[h("div",q,[f(v,{gutter:20},{default:j((()=>[f(_,{span:20},{default:j((()=>[f(u,{modelValue:a.loginForm.captcha,"onUpdate:modelValue":i[2]||(i[2]=e=>a.loginForm.captcha=e),placeholder:"请输入验证码"},null,8,["modelValue"])])),_:1}),f(_,{span:4},{default:j((()=>[h("span",{class:"captcha block pointer",innerHTML:a.captcha,onClick:i[3]||(i[3]=(...e)=>a.getCaptcha&&a.getCaptcha(...e))},null,8,x)])),_:1})])),_:1})])])),_:1}),f(y,null,{default:j((()=>[f(F,{type:"primary",onClick:a.login},{default:j((()=>[w("登录")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])]),$])}],["__scopeId","data-v-819488aa"]]);export{L as default};
//# sourceMappingURL=index12.js.map
