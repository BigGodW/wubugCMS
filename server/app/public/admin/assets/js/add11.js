import{E as i,s as E,t as x,a as h,D as w,F as C,G as I,f as B,r as M}from"./element-plus.js";import{u as R}from"./vue-router.js";import{c as D}from"./slide.js";import{a as F}from"./upload.js";import{_ as N}from"./index.js";import{r as q,I as z,ad as G,o as d,c as O,M as t,Q as r,R as P,W as Q,U as S}from"./@vue.js";import"./lodash-es.js";import"./async-validator.js";import"./dayjs.js";import"./@element-plus.js";import"./@popperjs.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./sys_config.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vanilla-jsoneditor.js";import"./json-source-map.js";import"./@jsonquerylang.js";import"./@fortawesome.js";import"./natural-compare-lite.js";import"./@codemirror.js";import"./@lezer.js";import"./crelt.js";import"./style-mod.js";import"./w3c-keyname.js";import"./@replit.js";import"./codemirror-wrapped-line-indent.js";import"./fast-deep-equal.js";import"./fast-uri.js";import"./jmespath.js";import"./jsonpath-plus.js";import"./immutable-json-patch.js";import"./jsonrepair.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css        */const T={class:"bg-fff pd-20 radius-6"},W={__name:"add",setup(j){const u=R(),p=q(null),f={title:[{required:!0,message:"请输入标题",trigger:"blur"}]},o=z({title:"",imgUrl:"",linkUrl:""}),_=l=>l.type.indexOf("image")===-1?(i("上传文件只能是图片格式"),!1):l.size/1024/1024>.2?(i("上传图片必须小于200k"),!1):!0,g=async l=>{const e=new FormData;e.append("file",l.file);const a=await F(e);a.code===200&&(o.imgUrl=a.data.path)},U=()=>{p.value.validate(async l=>{if(l)try{const e=await D(o);e.code===200?(i({message:"新增成功^_^",type:"success"}),u.back()):i({message:e.msg,type:"error"})}catch(e){console.error(e)}else console.log("error submit!!")})};return(l,e)=>{const a=E,m=x,y=G("MostlyCloudy"),b=h,n=w,v=C,c=I,k=B,V=M;return d(),O("div",T,[t(V,{model:o,rules:f,ref_key:"formRef",ref:p,"label-width":"84px",class:"mt-20"},{default:r(()=>[t(m,{label:"轮播标题",prop:"title"},{default:r(()=>[t(a,{modelValue:o.title,"onUpdate:modelValue":e[0]||(e[0]=s=>o.title=s)},null,8,["modelValue"])]),_:1}),t(m,{class:"flex",label:"轮播图"},{default:r(()=>[t(v,{class:"avatar-uploader","http-request":g,"show-file-list":!1,"before-upload":_},{default:r(()=>[t(n,{placement:"top-start",title:"上传",width:200,trigger:"hover",content:"上传图片作为封面图，大小200k内"},{reference:r(()=>[t(b,{class:"avatar-uploader-icon"},{default:r(()=>[t(y)]),_:1})]),_:1})]),_:1}),o.imgUrl?(d(),P(n,{key:0,placement:"right",width:600,trigger:"hover"},{reference:r(()=>[t(c,{class:"avatar-uploader-icon pointer ml-10",src:o.imgUrl},null,8,["src"])]),default:r(()=>[t(c,{style:{width:"100%"},src:o.imgUrl},null,8,["src"])]),_:1})):Q("",!0),t(a,{class:"ml-10 flex-1",modelValue:o.imgUrl,"onUpdate:modelValue":e[1]||(e[1]=s=>o.imgUrl=s)},null,8,["modelValue"])]),_:1}),t(m,{label:"轮播链接"},{default:r(()=>[t(a,{modelValue:o.linkUrl,"onUpdate:modelValue":e[2]||(e[2]=s=>o.linkUrl=s)},null,8,["modelValue"])]),_:1}),t(m,null,{default:r(()=>[t(k,{type:"primary",onClick:U},{default:r(()=>e[3]||(e[3]=[S("保存")])),_:1})]),_:1})]),_:1},8,["model"])])}}},Me=N(W,[["__scopeId","data-v-70d60bec"]]);export{Me as default};
