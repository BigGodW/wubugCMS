import{E as y,s as M,t as N,f as j,r as F,O as U,P as q,L as G}from"./element-plus.js";import{G as H,v as O,H as P,E as Q}from"./@element-plus.js";import{s as z,b as A,d as J}from"./category.js";import{_ as K,t as W,a as X}from"./index.js";import{u as Y}from"./vue-router.js";import{I as Z,r as p,j as ee,ad as te,o as s,c,a as h,M as o,Q as a,u as m,U as u,_ as oe,R as ae,V as re}from"./@vue.js";import"./lodash-es.js";import"./async-validator.js";import"./dayjs.js";import"./@popperjs.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vanilla-jsoneditor.js";import"./json-source-map.js";import"./@jsonquerylang.js";import"./@fortawesome.js";import"./natural-compare-lite.js";import"./@codemirror.js";import"./@lezer.js";import"./crelt.js";import"./style-mod.js";import"./w3c-keyname.js";import"./@replit.js";import"./codemirror-wrapped-line-indent.js";import"./fast-deep-equal.js";import"./fast-uri.js";import"./jmespath.js";import"./jsonpath-plus.js";import"./immutable-json-patch.js";import"./jsonrepair.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css        */const le={class:"bg-fff radius-6 pd-20 mb-10"},ne={class:"bg-fff radius-6 pd-20"},se={class:"flex justify-end"},ie={key:0},ce={key:1},de={key:0},pe={key:1},me={__name:"index",setup(ue){const i=Z({keywords:""}),k=p(!0),_=p([]),C=p(null),g=p([]),x=Y(),w=()=>{i.keywords="",_.value=[],g.value=[],f()},f=async()=>{try{const t=i.keywords,e=await z(t);if(e.code===200){const d=W(e.data);_.value=X(d),k.value=!1}}catch(t){console.log(t)}},E=t=>{g.value=t},V=t=>{const e=t.id;x.push({name:"category-edit",params:{id:e}})},$=async t=>{try{const e=await A(t);if(e.code===200)return e.data.length>0}catch(e){console.log(e)}return!1},B=async t=>{try{const e=await J(t);e.code===200?(y({message:"删除成功 ^_^",type:"success"}),w()):y({message:e.msg,type:"error"})}catch(e){console.log(e)}},S=t=>{let e;t.type===0?e="".concat(location.origin).concat(t.path,"/index.html"):e="".concat(location.origin).concat(t.path,"/page.html"),window.open(e)},I=async t=>{const e=t.id;if(await $(e)){y({message:"我下面还有栏目啊 ^_^",type:"warning"});return}B(e)};return ee(()=>{f()}),(t,e)=>{const d=M,b=N,n=j,T=F,D=te("router-link"),l=U,R=q,L=G;return s(),c("div",null,[h("div",le,[o(T,{inline:!0,model:i},{default:a(()=>[o(b,{label:"名称",prop:"keywords"},{default:a(()=>[o(d,{placeholder:"请输入栏目名称","suffix-icon":m(H),modelValue:i.keywords,"onUpdate:modelValue":e[0]||(e[0]=r=>i.keywords=r),clearable:""},null,8,["suffix-icon","modelValue"])]),_:1}),o(b,null,{default:a(()=>[o(n,{type:"primary",onClick:f,round:""},{default:a(()=>e[1]||(e[1]=[u("搜索")])),_:1}),o(n,{onClick:w,round:""},{default:a(()=>e[2]||(e[2]=[u("清空")])),_:1})]),_:1})]),_:1},8,["model"])]),h("div",ne,[h("div",se,[o(D,{to:"/category/add"},{default:a(()=>[o(n,{type:"primary",round:""},{default:a(()=>e[3]||(e[3]=[u("新增")])),_:1})]),_:1})]),oe((s(),ae(R,{ref_key:"multipleTableRef",ref:C,data:_.value,"tooltip-effect":"dark","row-key":"name","tree-props":{children:"children",hasChildren:"hasChildren"},onSelectionChange:E},{default:a(()=>[o(l,{type:"selection"}),o(l,{prop:"name",label:"栏目名称",width:"140"}),o(l,{prop:"id",align:"center",label:"编号"}),o(l,{prop:"type",label:"类型",width:"80"},{default:a(r=>[r.row.type==0?(s(),c("p",ie,"栏目")):(s(),c("p",ce,"单页"))]),_:1}),o(l,{prop:"orderBy",align:"center",label:"排序"},{default:a(r=>[u(re(r.row.orderBy),1)]),_:1}),o(l,{prop:"status",label:"状态"},{default:a(r=>[r.row.status==0?(s(),c("p",de,"显示")):(s(),c("p",pe,"隐藏"))]),_:1}),o(l,{fixed:"right",label:"操作",width:"160"},{default:a(r=>[o(n,{icon:m(O),circle:"",onClick:v=>S(r.row)},null,8,["icon","onClick"]),o(n,{icon:m(P),circle:"",onClick:v=>V(r.row)},null,8,["icon","onClick"]),o(n,{icon:m(Q),circle:"",onClick:v=>I(r.row)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[L,k.value]])])])}}},Xe=K(me,[["__scopeId","data-v-07b37cdb"]]);export{Xe as default};
