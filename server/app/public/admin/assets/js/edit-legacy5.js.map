{"version":3,"file":"edit-legacy5.js","sources":["../../../src/views/frag/edit.vue"],"sourcesContent":["<template>\n  <div class=\"mr-10 ml-10 mb-20\">\n    <el-form\n      ref=\"params\"\n      :model=\"params\"\n      :rules=\"paramsRules\"\n      label-width=\"84px\"\n      class=\"mt-20\"\n      v-loading=\"loading\"\n    >\n      <div>\n        <el-form-item label=\"碎片名称\" prop=\"name\">\n          <el-input v-model=\"params.name\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"碎片标识\" prop=\"mark\">\n          <el-input v-model=\"params.mark\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"文章内容\">\n          <vue3-tinymce\n            v-model=\"params.content\"\n            :setting=\"setting\"\n            @init=\"tinymce\"\n            script-src=\"/public/admin/tinymce/tinymce.min.js\"\n          />\n        </el-form-item>\n\n        <el-form-item label=\"发布时间\">\n          <el-date-picker\n            v-model=\"params.createdAt\"\n            type=\"datetime\"\n            placeholder=\"选择日期时间\"\n          ></el-date-picker>\n        </el-form-item>\n      </div>\n\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"submit('params')\">保存</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { update, detail } from \"@/api/frag.js\";\nimport Vue3Tinymce from \"@jsdawn/vue3-tinymce\";\nimport { tinymceSet } from \"@/config/tinymce.js\";\nexport default {\n  name: \"frag-edit\",\n  components: {\n    Vue3Tinymce,\n  },\n  data: () => {\n    return {\n      setting: tinymceSet,\n      loading: true,\n      params: {\n        //接口入参\n        id: 0,\n        name: 0,\n        mark: \"\",\n        createdAt: new Date(),\n        content: \"禅悦\",\n      },\n      dialogVisible: false,\n      disabled: false,\n      paramsRules: {\n        //校验规则\n        name: [\n          { required: true, message: \"请输入栏目名称\", trigger: \"blur\" },\n          {\n            min: 2,\n            max: 50,\n            message: \"名称长度在 2 到 50 个字符之间\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n  computed: {},\n  async mounted() {},\n\n  async created() {\n    this.params.id = this.$route.params.id;\n    await this.detail();\n  },\n  unmounted() {},\n  methods: {\n    tinymce() {\n      this.loading = false;\n    },\n\n    setContent(article) {\n      this.params.content = article;\n    },\n    // 文章详情\n    async detail() {\n      try {\n        let res = await detail(this.params.id);\n        if (res.code === 200) {\n          this.params = res.data;\n          this.params.createdAt = new Date(this.params.createdAt);\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    },\n\n    handleAttr(e) {\n      console.log(\"e-->\", e);\n    },\n\n    handleSubCid(e) {\n      console.log(\"e-->\", e);\n    },\n\n    //新增\n    async update() {\n      try {\n        let res = await update(this.params);\n        if (res.code) {\n          this.$message({\n            message: \"更新成功^_^\",\n            type: \"success\",\n          });\n          this.$router.go(-1);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    submit(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.update();\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n  },\n};\n</script>\n<style scoped>\n:deep(.tiny-textarea) {\n  height: 436px;\n}\n</style>\n"],"names":["_hoisted_1","class","name","data","setting","tinymceSet","params","mark","createdAt","Date","dialogVisible","disabled","max","trigger","mounted","created","this","id","$route","detail","methods","tinymce","loading","setContent","article","res","code","console","error","log","e","handleSubCid","update","$message","message","type","$router","go","submit","formName","$refs","validate","valid","_openBlock","_createElementBlock","ref","model","_ctx","rules","paramsRules","label","prop","modelValue","_cache","$event","content","onInit","$options","placeholder","onClick"],"mappings":"igCACOA,EAAA,CAAAC,MAAA,mCA+CP,CACEC,KAAA,uCAIAC,KAAAA,KACE,CACEC,QAAAC,aAEAC,OAAA,MAGEJ,KAAA,EACAK,KAAA,GACAC,UAAA,IAAAC,mBAGFC,eAAA,EACAC,UAAA,oEAKI,OAEEC,IAAA,gCAEAC,QAAA,wBAOV,aAAAC,GAAA,EAEA,aAAAC,GACEC,KAAAV,OAAAW,GAAAD,KAAAE,OAAAZ,OAAAW,cACAE,wBAGFC,QAAA,CACEC,OAAAA,GACEL,KAAAM,SAAA,GAGFC,UAAAA,CAAAC,yCAKE,IACE,IAAAC,QAAAN,EAAAH,KAAAV,OAAAW,IACA,MAAAQ,EAAAC,OACEV,KAAAV,OAAAmB,EAAAtB,qEAIFwB,QAAAC,MAAAA,EACF,iBAIAD,QAAAE,IAAA,UAAAC,IAGFC,YAAAA,CAAAD,GACEH,QAAAE,IAAA,UAAAC,mBAKA,WACEE,EAAAhB,KAAAV,gBAEEU,KAAAiB,SAAA,CACEC,QAAA,UACAC,KAAA,YAEFnB,KAAAoB,QAAAC,IAAA,aAGFV,QAAAE,IAAAD,EACF,GAGFU,MAAAA,CAAAC,GACEvB,KAAAwB,MAAAD,GAAAE,UAAAC,IACE,IAAAA,uDAKA,0FA5IN,OAAAC,IAAAC,EAAA,MAAA5C,EAAA,aAEI6C,IAAA,SACCC,MAAAC,EAAAzC,OACA0C,MAAAD,EAAAE,YACD,cAAA,OACAhD,MAAA,6CAIgBiD,MAAA,OAAaC,KAAA,8BACNC,WAAAL,EAAAzC,OAAAJ,KAAA,sBAAAmD,EAAA,KAAAA,EAAA,GAAAC,GAAAP,EAAAzC,OAAAJ,KAAAoD,yCAGPJ,MAAA,OAAaC,KAAA,8BACNC,WAAAL,EAAAzC,OAAAC,KAAA,sBAAA8C,EAAA,KAAAA,EAAA,GAAAC,GAAAP,EAAAzC,OAAAC,KAAA+C,6EAKRF,WAAAL,EAAAzC,OAAAiD,QAAA,sBAAAF,EAAA,KAAAA,EAAA,GAAAC,GAAAP,EAAAzC,OAAAiD,QAAAD,GACRlD,QAAA2C,EAAA3C,QACAoD,OAAAC,EAAApC,QACD,aAAA,oIAMS+B,WAAAL,EAAAzC,OAAAE,UAAA,sBAAA6C,EAAA,KAAAA,EAAA,GAAAC,GAAAP,EAAAzC,OAAAE,UAAA8C,GACTnB,KAAA,WACAuB,YAAA,2EAMOvB,KAAA,UAAgBwB,QAAAN,EAAA,KAAAA,EAAA,GAAAC,GAAAG,EAAAnB,OAAA"}