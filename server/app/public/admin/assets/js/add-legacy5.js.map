{"version":3,"file":"add-legacy5.js","sources":["../../../src/views/field/add.vue"],"sourcesContent":["<template>\n  <div class=\"mr-10 ml-10 mb-20\">\n    <el-form\n      ref=\"params\"\n      :model=\"params\"\n      :rules=\"paramsRules\"\n      label-width=\"100px\"\n    >\n      <el-form-item label=\"中文名称\" prop=\"field_cname\">\n        <el-input v-model=\"params.field_cname\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"英文名称\" prop=\"field_ename\">\n        <el-input v-model=\"params.field_ename\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"字段类型\">\n        <el-select v-model=\"params.field_type\" placeholder=\"请选择\">\n          <el-option\n            v-for=\"item in type\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\"\n          >\n          </el-option>\n        </el-select>\n      </el-form-item>\n\n      <el-form-item label=\"字段选项\">\n        <el-input v-model=\"params.field_values\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"默认值\">\n        <el-input v-model=\"params.field_default\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"排序\">\n        <el-input v-model=\"params.field_sort\"></el-input>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"submit('params')\">保存</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { create } from \"@/api/field.js\";\nexport default {\n  name: \"field-add\",\n  components: {},\n  data: () => {\n    return {\n      params: {\n        //接口入参\n        model_id: \"\",\n        field_cname: \"\",\n        field_ename: \"\",\n        field_type: \"\",\n        field_values: \"\",\n        field_default: \"\",\n        field_sort: \"0\",\n      },\n      type: [\n        {\n          value: \"1\",\n          label: \"单行文本\",\n        },\n        {\n          value: \"2\",\n          label: \"多行文本 \",\n        },\n        {\n          value: \"3\",\n          label: \"下拉菜单\",\n        },\n        {\n          value: \"4\",\n          label: \"单选\",\n        },\n        {\n          value: \"5\",\n          label: \"多选 \",\n        },\n        {\n          value: \"6\",\n          label: \"时间和日期 \",\n        },\n        {\n          value: \"7\",\n          label: \"数字 \",\n        },\n      ],\n      value: \"\",\n      paramsRules: {\n        //校验规则\n        field_cname: [\n          { required: true, message: \"字段名称\", trigger: \"blur\" },\n          {\n            min: 2,\n            max: 80,\n            message: \"名称长度在 2 到 80 个字符之间\",\n            trigger: \"blur\",\n          },\n        ],\n        table_name: [\n          { required: true, message: \"新增表名\", trigger: \"blur\" },\n          {\n            min: 2,\n            max: 80,\n            message: \"名称长度在 2 到 80 个字符之间\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n  computed: {},\n  mounted() {},\n  async created() {\n    const { model_name, mid, table_name } = this.$route.query;\n    this.params.model_id = mid;\n    this.params.table_name = table_name;\n    this.model_name = model_name;\n  },\n  methods: {\n    handleAttr(e) {\n      console.log(\"e-->\", e);\n    },\n\n    //新增\n    async create() {\n      try {\n        let params = { ...this.params };\n        let res = await create(params);\n        if (res.code == 200) {\n          this.$message({\n            message: \"新增成功^_^\",\n            type: \"success\",\n          });\n          this.$router.go(-1);\n        } else {\n          this.$message({\n            message: res.msg,\n            type: \"success\",\n          });\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    submit(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.create();\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n  },\n};\n</script>\n<style scoped></style>\n"],"names":["_hoisted_1","class","name","data","params","field_cname","field_ename","field_values","field_default","field_sort","value","required","message","trigger","max","async","this","table_name","methods","console","log","e","res","code","$message","type","$router","go","msg","error","submit","formName","$refs","validate","valid","_openBlock","_createElementBlock","ref","model","_ctx","rules","paramsRules","label","prop","modelValue","_cache","$event","field_type","placeholder","onClick","$options"],"mappings":"owBAgDA,MA/COA,EAAA,CAAAC,MAAA,mCA+CP,CACEC,KAAA,0BAEAC,KAAAA,KACE,CACEC,OAAA,aAGEC,YAAA,GACAC,YAAA,iBAEAC,aAAA,GACAC,cAAA,GACAC,WAAA,WAGA,CACEC,MAAA,kBAGF,CACEA,MAAA,mBAGF,CACEA,MAAA,kBAGF,CACEA,MAAA,gBAGF,CACEA,MAAA,iBAGF,CACEA,MAAA,oBAGF,CACEA,MAAA,kBAIJA,MAAA,6BAII,CAAAC,UAAA,EAAAC,QAAA,OAAAC,QAAA,QACA,OAEEC,IAAA,gCAEAD,QAAA,qBAIF,CAAAF,UAAA,EAAAC,QAAA,OAAAC,QAAA,QACA,OAEEC,IAAA,gCAEAD,QAAA,oCAQVE,gGAGEC,KAAAZ,OAAAa,WAAAA,qBAGFC,QAAA,eAEIC,QAAAC,IAAA,UAAAC,mBAKA,wCAGE,KAAAC,EAAAC,MACEP,KAAAQ,SAAA,CACEZ,QAAA,UACAa,KAAA,YAEFT,KAAAU,QAAAC,IAAA,IAEAX,KAAAQ,SAAA,CACEZ,QAAAU,EAAAM,IACAH,KAAA,qBAIJN,QAAAC,IAAAS,EACF,GAGFC,OAAAC,GACEf,KAAAgB,MAAAD,GAAAE,UAAAC,IACE,IAAAA,uDAKA,sEA9JN,OAAAC,IAAAC,EAAA,MAAApC,EAAA,MAEIqC,IAAA,SACCC,MAAAC,EAAAnC,OACAoC,MAAAD,EAAAE,YACD,cAAA,+BAEcC,MAAA,OAAaC,KAAA,qCACNC,WAAAL,EAAAnC,OAAAC,YAAA,sBAAAwC,EAAA,KAAAA,EAAA,GAAAC,GAAAP,EAAAnC,OAAAC,YAAAyC,yCAEPJ,MAAA,OAAaC,KAAA,qCACNC,WAAAL,EAAAnC,OAAAE,YAAA,sBAAAuC,EAAA,KAAAA,EAAA,GAAAC,GAAAP,EAAAnC,OAAAE,YAAAwC,6EAICF,WAAAL,EAAAnC,OAAA2C,WAAA,sBAAAF,EAAA,KAAAA,EAAA,GAAAC,GAAAP,EAAAnC,OAAA2C,WAAAD,GAAmBE,YAAA,uNAYpBJ,WAAAL,EAAAnC,OAAAG,aAAA,sBAAAsC,EAAA,KAAAA,EAAA,GAAAC,GAAAP,EAAAnC,OAAAG,aAAAuC,4EAIAF,WAAAL,EAAAnC,OAAAI,cAAA,sBAAAqC,EAAA,KAAAA,EAAA,GAAAC,GAAAP,EAAAnC,OAAAI,cAAAsC,2EAIAF,WAAAL,EAAAnC,OAAAK,WAAA,sBAAAoC,EAAA,KAAAA,EAAA,GAAAC,GAAAP,EAAAnC,OAAAK,WAAAqC,mEAIRrB,KAAA,UAAgBwB,QAAAJ,EAAA,KAAAA,EAAA,GAAAC,GAAAI,EAAApB,OAAA"}