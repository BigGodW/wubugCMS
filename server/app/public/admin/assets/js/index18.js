import{E as f,s as M,t as N,f as U,r as $,O as D,P as Q,Q as z,w as G}from"./element-plus.js";import{a as H,u as O}from"./vue-router.js";import{G as A,H as J,E as K}from"./@element-plus.js";import{s as L,a as W}from"./tag.js";import{_ as X}from"./index.js";import{r as i,I as Y,j as Z,w as ee,ad as te,o as oe,c as re,a as _,M as o,Q as r,u as y,U as g}from"./@vue.js";import"./lodash-es.js";import"./async-validator.js";import"./dayjs.js";import"./@popperjs.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vanilla-jsoneditor.js";import"./json-source-map.js";import"./@jsonquerylang.js";import"./@fortawesome.js";import"./natural-compare-lite.js";import"./@codemirror.js";import"./@lezer.js";import"./crelt.js";import"./style-mod.js";import"./w3c-keyname.js";import"./@replit.js";import"./codemirror-wrapped-line-indent.js";import"./fast-deep-equal.js";import"./fast-uri.js";import"./jmespath.js";import"./jsonpath-plus.js";import"./immutable-json-patch.js";import"./jsonrepair.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css        */const ae={class:"bg-fff radius-6 pd-20 mb-10"},ne={class:"bg-fff radius-6 pd-20"},le={class:"flex justify-end align-c"},se={__name:"index",setup(ie){const k=H(),d=O(),v=i(null),h=i(null),n=Y({keywords:""}),w=i([]),E=i([]),b=i(0),l=i(1);Z(()=>{const{cur:e=1,keywords:t=""}=k.query;l.value=parseInt(e,10),n.keywords=t,c()}),ee(k,(e,t)=>{if(e.name==="tag-index"){const{cur:a,keywords:m}=e.query;l.value=parseInt(a,10),n.keywords=m,c()}});const x=e=>{e&&v.value.resetFields(),d.replace({name:"tag-index",query:{cur:1,keywords:""}}),c()},c=async()=>{try{const e=await L(l.value,n.keywords);e.code===200?(w.value=e.data.list,b.value=e.data.count):f({message:e.msg,type:"error"})}catch(e){console.error(e)}},C=()=>{d.replace({name:"tag-index",query:{cur:l.value,keywords:n.keywords}}),c()},R=e=>{l.value=parseInt(e,10),C()},I=e=>{E.value=e},T=e=>{const t=e.id;d.push({name:"tag-edit",params:{id:t}})},P=async e=>{const t=e.id;try{const a=await W(t);a.code===200?(f({message:"删除成功 ^_^",type:"success"}),c()):f({message:a.msg,type:"error"})}catch(a){console.error(a)}};return(e,t)=>{const a=M,m=N,p=U,V=$,S=te("router-link"),u=D,q=Q,B=z,j=G;return oe(),re("div",null,[_("div",ae,[o(V,{inline:!0,model:n,ref_key:"formRef",ref:v},{default:r(()=>[o(m,{label:"标题",prop:"keywords"},{default:r(()=>[o(a,{placeholder:"请输入内容","suffix-icon":y(A),clearable:"",onClear:x,modelValue:n.keywords,"onUpdate:modelValue":t[0]||(t[0]=s=>n.keywords=s)},null,8,["suffix-icon","modelValue"])]),_:1}),o(m,null,{default:r(()=>[o(p,{type:"primary",onClick:C,round:""},{default:r(()=>t[3]||(t[3]=[g("搜索")])),_:1}),o(p,{onClick:t[1]||(t[1]=s=>x("formRef")),round:""},{default:r(()=>t[4]||(t[4]=[g("清空")])),_:1})]),_:1})]),_:1},8,["model"])]),_("div",ne,[_("div",le,[o(S,{to:"/tag/add"},{default:r(()=>[o(p,{type:"primary",round:""},{default:r(()=>t[5]||(t[5]=[g("新增")])),_:1})]),_:1})]),o(q,{ref_key:"multipleTableRef",ref:h,data:w.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:I},{default:r(()=>[o(u,{type:"selection"}),o(u,{prop:"id",label:"编号"}),o(u,{prop:"name",label:"名称"}),o(u,{prop:"path",label:"标识"}),o(u,{fixed:"right",width:"100",label:"操作"},{default:r(s=>[o(p,{icon:y(J),circle:"",onClick:F=>T(s.row)},null,8,["icon","onClick"]),o(p,{icon:y(K),circle:"",onClick:F=>P(s.row)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"]),o(j,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:r(()=>[o(B,{background:"",layout:"prev, pager, next",onCurrentChange:R,"page-size":10,total:b.value,currentPage:l.value,"onUpdate:currentPage":t[2]||(t[2]=s=>l.value=s),"hide-on-single-page":""},null,8,["total","currentPage"])]),_:1})])])}}},Ae=X(se,[["__scopeId","data-v-da091111"]]);export{Ae as default};
