{"version":3,"file":"sys.js","sources":["../../../src/views/home/sys.vue"],"sourcesContent":["<template>\n  <div class=\"mr-10 ml-10\">\n    <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\n      <!-- 基本设置 -->\n      <el-tab-pane label=\"基本设置\" class=\"mt-20\" name=\"first\">\n        <el-form ref=\"info\" :model=\"info\" label-width=\"84px\">\n          <el-form-item\n            label=\"网站名称\"\n            prop=\"name\"\n            :rules=\"[\n              {\n                required: true,\n                message: '请输入网站名称',\n                trigger: 'blur',\n              },\n              {\n                min: 2,\n                max: 20,\n                message: '长度在 2 到 20 个字符',\n                trigger: 'blur',\n              },\n            ]\"\n          >\n            <el-input v-model=\"info.name\"></el-input>\n          </el-form-item>\n\n          <el-form-item prop=\"domain\" label=\"网站域名\">\n            <el-input v-model=\"info.domain\"></el-input>\n          </el-form-item>\n\n          <el-form-item prop=\"email\" label=\"站长邮箱\">\n            <el-input\n              v-model=\"info.email\"\n              :rules=\"[\n                {\n                  type: 'email',\n                  message: '请输入正确的邮箱',\n                  trigger: ['blur', 'change'],\n                },\n              ]\"\n            ></el-input>\n          </el-form-item>\n\n          <el-form-item prop=\"icp\" label=\"ICP备案号\">\n            <el-input v-model=\"info.icp\"></el-input>\n          </el-form-item>\n\n          <el-form-item prop=\"code\" label=\"统计代码\">\n            <el-input\n              type=\"textarea\"\n              prop=\"textarea\"\n              class=\"textarea\"\n              :rows=\"3\"\n              v-model=\"info.code\"\n            ></el-input>\n          </el-form-item>\n\n          <el-form-item prop=\"json\" label=\"万能配置\">\n            <el-input\n              type=\"textarea\"\n              prop=\"textarea\"\n              class=\"textarea\"\n              :rows=\"3\"\n              v-model=\"info.json\"\n            ></el-input>\n          </el-form-item>\n\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"submitInfo('info')\"\n              >保存</el-button\n            >\n          </el-form-item>\n        </el-form>\n      </el-tab-pane>\n\n      <!-- seo设置 -->\n      <el-tab-pane label=\"SEO设置\" class=\"mt-20\" name=\"second\">\n        <el-form ref=\"seo\" :model=\"seo\" label-width=\"84px\">\n          <el-form-item\n            label=\"标题\"\n            prop=\"title\"\n            :rules=\"[\n              {\n                required: true,\n                message: '请输入网站标题',\n                trigger: 'blur',\n              },\n              {\n                min: 2,\n                max: 20,\n                message: '长度在 2 到 20 个字符',\n                trigger: 'blur',\n              },\n            ]\"\n          >\n            <el-input v-model=\"seo.title\"></el-input>\n          </el-form-item>\n\n          <el-form-item label=\"关键词\" prop=\"keywords\">\n            <el-input v-model=\"seo.keywords\"></el-input>\n          </el-form-item>\n\n          <el-form-item\n            label=\"描述\"\n            prop=\"description\"\n            :rules=\"[\n              {\n                min: 2,\n                max: 255,\n                message: '字数限制255',\n                trigger: 'blur',\n              },\n            ]\"\n          >\n            <el-input\n              type=\"textarea\"\n              :rows=\"3\"\n              class=\"textarea\"\n              v-model=\"seo.description\"\n            ></el-input>\n          </el-form-item>\n\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"submitSeo('seo')\">保存</el-button>\n          </el-form-item>\n        </el-form>\n      </el-tab-pane>\n    </el-tabs>\n  </div>\n</template>\n\n<script>\nimport { siteInfo, updateInfo, updateSeo } from \"@/api/site.js\";\n\nexport default {\n  name: \"sys-index\",\n  data: () => {\n    return {\n      loading: true,\n      activeName: \"first\",\n      activeIndex: \"0\",\n      info: {\n        id: \"\",\n        name: \"\",\n        domain: \"\",\n        email: \"\",\n        icp: \"\",\n        json: \"\",\n        code: \"\",\n      },\n      seo: {\n        id: \"\",\n        title: \"\",\n        keywords: \"\",\n        description: \"\",\n      },\n      infoRules: {\n        name: [\n          { required: true, message: \"请输入网站名称\", trigger: \"blur\" },\n          {\n            min: 2,\n            max: 20,\n            message: \"长度在 2 到 20 个字符\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n      seoRules: {\n        title: [\n          { required: true, message: \"不能为空\", trigger: \"blur\" },\n          {\n            min: 2,\n            max: 50,\n            message: \"长度在 2 到 50 个字符\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n  computed: {},\n  created() {\n    this.query();\n  },\n  methods: {\n    handleClick(tab) {\n      this.activeIndex = tab.index;\n    },\n\n    //查询\n    async query() {\n      try {\n        let res = await siteInfo();\n        if (res.code === 200) {\n          this.loading = false;\n          let {\n            id,\n            name,\n            domain,\n            email,\n            icp,\n            police,\n            copyright,\n            json,\n            code,\n            title,\n            keywords,\n            description,\n          } = res.data;\n          this.info = {\n            id,\n            name,\n            domain,\n            email,\n            icp,\n            police,\n            copyright,\n            code,\n            json,\n          };\n          this.seo = { id, title, keywords, description };\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    //更新基本信息\n    async updateInfo() {\n      try {\n        let res = await updateInfo(this.info);\n        if (res.code === 200 && res.data) {\n          this.$message({\n            message: \"更新成功^_^\",\n            type: \"success\",\n          });\n          this.query();\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    //更新SEO信息\n    async updateSeo() {\n      try {\n        let res = await updateSeo(this.seo);\n        if (res.code === 200 && res.data) {\n          this.$message({\n            message: \"更新成功^_^\",\n            type: \"success\",\n          });\n          this.query();\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    submitInfo(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.updateInfo();\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n\n    submitSeo(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.updateSeo();\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n  },\n};\n</script>\n<style></style>\n"],"names":["_hoisted_1","class","name","data","activeName","activeIndex","domain","email","icp","json","code","title","description","max","message","trigger","seoRules","required","created","methods","handleClick","tab","res","this","loading","id","police","copyright","keywords","seo","console","log","error","updateInfo","info","$message","type","updateSeo","submitInfo","formName","$refs","validate","valid","submitSeo","_openBlock","_createElementBlock","onTabClick","$options","label","ref","model","_ctx","prop","rules","modelValue","_cache","$event","rows","onClick"],"mappings":"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"}