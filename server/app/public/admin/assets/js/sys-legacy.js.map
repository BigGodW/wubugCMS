{"version":3,"file":"sys-legacy.js","sources":["../../../src/views/home/sys.vue"],"sourcesContent":["<template>\n  <div class=\"mr-10 ml-10\">\n    <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\n      <el-tab-pane label=\"基本设置\" name=\"first\"></el-tab-pane>\n      <el-tab-pane label=\"SEO设置\" name=\"second\"></el-tab-pane>\n    </el-tabs>\n  </div>\n\n  <!-- 基本设置 -->\n  <div class=\"mr-10 ml-10\" v-show=\"activeIndex === '0'\" v-loading=\"loading\">\n    <el-form ref=\"info\" :rules=\"infoRules\" :model=\"info\" label-width=\"84px\">\n      <el-form-item label=\"网站名称\" prop=\"name\">\n        <el-input v-model=\"info.name\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"网站域名\">\n        <el-input v-model=\"info.domain\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"站长邮箱\">\n        <el-input v-model=\"info.email\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"ICP备案号\">\n        <el-input v-model=\"info.icp\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"公司名称\">\n        <el-input v-model=\"info.companyName\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"公司地址\">\n        <el-input v-model=\"info.companyAddress\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"公司电话\">\n        <el-input v-model=\"info.companyTel\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"统计代码\">\n        <el-input\n          type=\"textarea\"\n          class=\"textarea\"\n          :rows=\"3\"\n          v-model=\"info.code\"\n        ></el-input>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"submitInfo('info')\">保存</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n\n  <!-- SEO设置 -->\n  <div class=\"mr-10 ml-10\" v-show=\"activeIndex === '1'\">\n    <el-form ref=\"seo\" :model=\"seo\" :rules=\"seoRules\" label-width=\"84px\">\n      <el-form-item label=\"标题\" prop=\"title\">\n        <el-input v-model=\"seo.title\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"关键词\">\n        <el-input v-model=\"seo.keywords\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"描述\">\n        <el-input\n          type=\"textarea\"\n          :rows=\"3\"\n          class=\"textarea\"\n          v-model=\"seo.description\"\n        ></el-input>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"submitSeo('seo')\">保存</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { siteInfo, updateInfo, updateSeo } from \"@/api/site.js\";\n\nexport default {\n  name: \"home-sys\",\n  data: () => {\n    return {\n      loading: true,\n      activeName: \"first\",\n      activeIndex: \"0\",\n      info: {\n        id: \"\",\n        name: \"\",\n        domain: \"\",\n        email: \"\",\n        icp: \"\",\n        police: \"\",\n        copyright: \"\",\n        code: \"\",\n      },\n      seo: {\n        id: \"\",\n        title: \"\",\n        keywords: \"\",\n        description: \"\",\n      },\n      infoRules: {\n        name: [\n          { required: true, message: \"请输入网站名称\", trigger: \"blur\" },\n          {\n            min: 2,\n            max: 20,\n            message: \"长度在 2 到 20 个字符\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n      seoRules: {\n        title: [\n          { required: true, message: \"不能为空\", trigger: \"blur\" },\n          {\n            min: 2,\n            max: 50,\n            message: \"长度在 2 到 50 个字符\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n  computed: {},\n  created() {\n    this.query();\n  },\n  methods: {\n    handleClick(tab) {\n      this.activeIndex = tab.index;\n    },\n\n    //查询\n    async query() {\n      try {\n        let res = await siteInfo();\n        if (res.code === 200) {\n          this.loading = false;\n          let {\n            id,\n            name,\n            domain,\n            email,\n            companyTel,\n            companyName,\n            companyAddress,\n            icp,\n            police,\n            copyright,\n            code,\n            title,\n            keywords,\n            description,\n          } = res.data;\n          this.info = {\n            id,\n            name,\n            domain,\n            email,\n            icp,\n            police,\n            copyright,\n            code,\n            companyTel,\n            companyName,\n            companyAddress,\n          };\n          this.seo = { id, title, keywords, description };\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    //更新基本信息\n    async updateInfo() {\n      try {\n        let res = await updateInfo(this.info);\n        if (res.code === 200 && res.data) {\n          this.$message({\n            message: \"更新成功^_^\",\n            type: \"success\",\n          });\n          this.query();\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    //更新SEO信息\n    async updateSeo() {\n      try {\n        let res = await updateSeo(this.seo);\n        if (res.code === 200 && res.data) {\n          this.$message({\n            message: \"更新成功^_^\",\n            type: \"success\",\n          });\n          this.query();\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    submitInfo(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.updateInfo();\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n\n    submitSeo(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.updateSeo();\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n  },\n};\n</script>\n<style></style>\n"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","name","data","activeName","activeIndex","domain","email","icp","police","code","title","description","max","message","trigger","seoRules","required","created","methods","handleClick","tab","res","this","loading","id","companyAddress","copyright","keywords","seo","console","log","error","async","updateInfo","info","$message","type","updateSeo","submitInfo","formName","$refs","validate","valid","submitSeo","_createElementVNode","onTabClick","$options","label","_withDirectives","_openBlock","_createElementBlock","ref","rules","_ctx","infoRules","model","prop","modelValue","_cache","$event","companyName","companyTel","rows","onClick"],"mappings":"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"}