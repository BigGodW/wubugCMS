{"version":3,"file":"add9.js","sources":["../../../src/views/model/add.vue"],"sourcesContent":["<template>\n  <div class=\"mr-10 ml-10 mb-20\">\n    <el-form\n      ref=\"params\"\n      :model=\"params\"\n      :rules=\"paramsRules\"\n      label-width=\"100px\"\n      class=\"mt-20\"\n    >\n      <el-form-item label=\"模型名称\" prop=\"model_name\">\n        <el-input v-model=\"params.model_name\" @input=\"change\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"新增表名\" prop=\"table_name\">\n        <el-input v-model=\"params.table_name\" disabled></el-input>\n      </el-form-item>\n      <el-form-item label=\"是否启用\">\n        <el-radio v-model=\"params.status\" label=\"1\">开启</el-radio>\n        <el-radio v-model=\"params.status\" label=\"0\">禁用</el-radio>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"submit('params')\">保存</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { create } from \"@/api/model.js\";\nexport default {\n  name: \"model-add\",\n  components: {},\n  data: () => {\n    return {\n      params: {\n        //接口入参\n        model_name: \"\", //\n        table_name: \"\",\n        status: \"1\",\n      },\n\n      paramsRules: {\n        //校验规则\n        model_name: [\n          { required: true, message: \"模型名称\", trigger: \"blur\" },\n          {\n            min: 2,\n            max: 80,\n            message: \"名称长度在 2 到 80 个字符之间\",\n            trigger: \"blur\",\n          },\n        ],\n        table_name: [\n          { required: true, message: \"新增表名\", trigger: \"blur\" },\n          {\n            min: 2,\n            max: 80,\n            message: \"名称长度在 2 到 80 个字符之间\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n  computed: {},\n  mounted() {\n    //tinymce.init({});\n  },\n  created() {},\n  methods: {\n    handleAttr(e) {\n      console.log(\"e-->\", e);\n    },\n    change(v) {\n      console.log(v);\n      this.params.table_name = v;\n    },\n    //新增\n    async create() {\n      try {\n        let params = { ...this.params };\n        let res = await create(params);\n        if (res.code == 200) {\n          this.$message({\n            message: \"更新成功^_^\",\n            type: \"success\",\n          });\n          this.$router.go(-1);\n        } else {\n          this.$message({\n            message: res.msg || res.error.sqlMessage,\n            type: \"fail\",\n          });\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    submit(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.create();\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n  },\n};\n</script>\n<style scoped></style>\n"],"names":["_hoisted_1","class","name","data","params","model_name","required","message","trigger","max","mounted","methods","console","log","e","change","v","res","code","this","$message","type","$router","go","msg","error","sqlMessage","submit","formName","$refs","validate","valid","_openBlock","_createElementBlock","ref","model","_ctx","rules","paramsRules","label","prop","modelValue","_cache","$event","onInput","$options","table_name","disabled","status","onClick"],"mappings":"0jBA4BA,MA3BOA,EAAA,CAAAC,MAAA,+BA2BP,CACEC,KAAA,0BAEAC,KAAA,KACE,CACEC,OAAA,CAEEC,WAAA,sDAQE,CAAAC,UAAA,EAAAC,QAAA,OAAAC,QAAA,QACA,OAEEC,IAAA,gCAEAD,QAAA,qBAIF,CAAAF,UAAA,EAAAC,QAAA,OAAAC,QAAA,QACA,OAEEC,IAAA,gCAEAD,QAAA,wBAOV,OAAAE,iBAIAC,QAAA,eAEIC,QAAAC,IAAA,UAAAC,IAEF,MAAAC,CAAAC,GACEJ,QAAAC,IAAAG,4CAKA,wCAGE,KAAAC,EAAAC,MACEC,KAAAC,SAAA,CACEb,QAAA,UACAc,KAAA,YAEFF,KAAAG,QAAAC,IAAA,IAEAJ,KAAAC,SAAA,CACEb,QAAAU,EAAAO,KAAAP,EAAAQ,MAAAC,kCAKJd,QAAAC,IAAAY,EACF,GAGF,MAAAE,CAAAC,GACET,KAAAU,MAAAD,GAAAE,UAAAC,IACE,IAAAA,uDAKA,kEAxGN,OAAAC,IAAAC,EAAA,MAAAjC,EAAA,MAEIkC,IAAA,SACCC,MAAAC,EAAAhC,OACAiC,MAAAD,EAAAE,YACD,cAAA,QACArC,MAAA,+BAEcsC,MAAA,OAAaC,KAAA,oCACNC,WAAAL,EAAAhC,OAAAC,WAAA,sBAAAqC,EAAA,KAAAA,EAAA,GAAAC,GAAAP,EAAAhC,OAAAC,WAAAsC,GAAoBC,QAAAC,EAAA9B,uDAE3BwB,MAAA,OAAaC,KAAA,oCACNC,WAAAL,EAAAhC,OAAA0C,WAAA,sBAAAJ,EAAA,KAAAA,EAAA,GAAAC,GAAAP,EAAAhC,OAAA0C,WAAAH,GAAmBI,SAAA,6EAGnBN,WAAAL,EAAAhC,OAAA4C,OAAA,sBAAAN,EAAA,KAAAA,EAAA,GAAAC,GAAAP,EAAAhC,OAAA4C,OAAAL,GAAeJ,MAAA,6DACfE,WAAAL,EAAAhC,OAAA4C,OAAA,sBAAAN,EAAA,KAAAA,EAAA,GAAAC,GAAAP,EAAAhC,OAAA4C,OAAAL,GAAeJ,MAAA,gGAGvBlB,KAAA,UAAgB4B,QAAAP,EAAA,KAAAA,EAAA,GAAAC,GAAAE,EAAAlB,OAAA"}