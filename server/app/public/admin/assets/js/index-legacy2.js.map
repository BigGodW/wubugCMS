{"version":3,"file":"index-legacy2.js","sources":["../../../src/views/ad/index.vue"],"sourcesContent":["<template>\n  <div>\n    <el-row type=\"flex\" class=\"mt-10 mb-10\" justify=\"end\">\n      <router-link to=\"/ad/add\">\n        <el-button type=\"primary\" round>新增</el-button>\n      </router-link>\n    </el-row>\n\n    <el-table\n      ref=\"multipleTable\"\n      :data=\"tableData\"\n      tooltip-effect=\"dark\"\n      row-key=\"id\"\n      size=\"small\"\n      @selection-change=\"handleSelectionChange\"\n    >\n      <el-table-column type=\"selection\"></el-table-column>\n      <el-table-column prop=\"id\" label=\"编号\" width=\"60\"></el-table-column>\n      <el-table-column prop=\"title\" label=\"标题\" width=\"120\"></el-table-column>\n      <el-table-column prop=\"mark\" label=\"标识\" width=\"180\"></el-table-column>\n      <el-table-column prop=\"platform\" label=\"平台\">\n        <template #default=\"scope\">\n          <span v-if=\"scope.row.platform.includes('1')\">PC</span>\n          <span v-if=\"scope.row.platform.includes('2')\">H5</span>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"position\" label=\"位置\">\n        <template #default=\"scope\">\n          <span class=\"mr-5\" v-if=\"scope.row.position.includes('1')\">首页</span>\n          <span class=\"mr-5\" v-if=\"scope.row.position.includes('2')\"\n            >频道页</span\n          >\n          <span class=\"mr-5\" v-if=\"scope.row.position.includes('3')\">列表</span>\n          <span class=\"mr-5\" v-if=\"scope.row.position.includes('4')\">详情</span>\n          <span class=\"mr-5\" v-if=\"scope.row.position.includes('5')\">单页</span>\n        </template>\n      </el-table-column>\n\n      <el-table-column prop=\"createdAt\" label=\"发布时间\" width=\"160\">\n        <template #default=\"scope\">{{ scope.row.createdAt }}</template>\n      </el-table-column>\n\n      <el-table-column prop=\"status\" label=\"状态\">\n        <template #default=\"scope\">\n          {{ scope.row.status == 1 ? \"显示\" : \"隐藏\" }}</template\n        >\n      </el-table-column>\n\n      <el-table-column fixed=\"right\" width=\"92\" label=\"操作\">\n        <template #default=\"scope\">\n          <el-button :icon=\"Edit\" circle @click=\"toEdit(scope.row)\"></el-button>\n          <el-button\n            :icon=\"Delete\"\n            circle\n            @click=\"handleDel(scope.row)\"\n          ></el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 分页 -->\n    <el-row type=\"flex\" class=\"mt-20 align-c\" justify=\"center\">\n      <el-pagination\n        background\n        layout=\"prev, pager, next\"\n        @current-change=\"handleCurrentChange\"\n        :pager-size=\"10\"\n        :total=\"count\"\n        hide-on-single-page\n      ></el-pagination>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport { Delete, Edit } from \"@element-plus/icons-vue\";\nimport { search, del } from \"@/api/ad.js\";\nexport default {\n  name: \"ad-index\",\n  setup() {\n    return {\n      Edit,\n      Delete,\n    };\n  },\n  data: () => {\n    return {\n      keywords: \"\",\n      tableData: [],\n      multipleSelection: [],\n      count: 0,\n      cur: 1,\n    };\n  },\n  computed: {},\n  created() {\n    this.search();\n  },\n  methods: {\n    //查询\n    async search() {\n      try {\n        let res = await search(this.cur, this.keywords);\n        if (res.code === 200) {\n          this.tableData = [...res.data.list];\n          this.count = res.data.count;\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    //翻页\n    handleCurrentChange(e) {\n      this.cur = e;\n      this.search();\n    },\n\n    toggleSelection(rows) {\n      if (rows) {\n        rows.forEach((row) => {\n          this.$refs.multipleTable.toggleRowSelection(row);\n        });\n      } else {\n        this.$refs.multipleTable.clearSelection();\n      }\n    },\n\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n\n    //跳转到编辑\n    toEdit(e) {\n      let id = e.id;\n      this.$router.push({ name: \"ad-edit\", params: { id: id } });\n    },\n\n    //删除文章\n    async handleDel(e) {\n      let id = e.id;\n      try {\n        let res = await del(id);\n        if (res.code === 200) {\n          this.$message({\n            message: \"删除成功 ^_^\",\n            type: \"success\",\n          });\n          this.search();\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n  },\n};\n</script>\n<style scoped></style>\n"],"names":["class","name","setup","Delete","data","multipleSelection","count","created","methods","res","search","this","cur","keywords","code","tableData","list","console","log","error","toggleSelection","rows","forEach","row","$refs","multipleTable","clearSelection","toEdit","e","async","del","id","$message","message","type","justify","round","ref","_ctx","size","onSelectionChange","$options","handleSelectionChange","prop","label","width","scope","platform","includes","_openBlock","_createElementBlock","_hoisted_1","_hoisted_2","position","fixed","icon","$setup","Edit","circle","onClick","$event","handleDel","background","layout","onCurrentChange","handleCurrentChange","total"],"mappings":"8yBA6EA,mCAjDgBA,MAAA,iBACAA,MAAA,iBAGAA,MAAA,iBACAA,MAAA,iBACAA,MAAA,sBA2ChB,CACEC,KAAA,WACAC,MAAAA,KACE,QAEEC,OAAAA,IAGJC,KAAAA,KACE,0BAGEC,kBAAA,GACAC,MAAA,sBAKJC,yBAGAC,QAAA,gBAGI,IACE,IAAAC,QAAAC,EAAAC,KAAAC,IAAAD,KAAAE,UACA,MAAAJ,EAAAK,OACEH,KAAAI,UAAA,IAAAN,EAAAL,KAAAY,wCAIFC,QAAAC,IAAAC,EACF,oDASFC,gBAAAC,GACEA,EACEA,EAAAC,SAAAC,sDAIAZ,KAAAa,MAAAC,cAAAC,qEASJC,OAAAC,iEAMAC,gBAAAD,cAEE,IAEE,aADAE,EAAAC,IACAjB,OACEH,KAAAqB,SAAA,CACEC,QAAA,WACAC,KAAA,oCAKJjB,QAAAC,IAAAC,EACF,iHAtJMe,KAAA,OAAYlC,MAAA,cAAoBmC,QAAA,iEAEzBD,KAAA,UAAeE,MAAA,6DAK5BC,IAAA,gBACCjC,KAAAkC,EAAAvB,UACD,iBAAA,OACA,UAAA,KACAwB,KAAA,QACCC,kBAAAC,EAAAC,qEAGgBC,KAAA,KAAUC,MAAA,KAAWC,MAAA,YACrBF,KAAA,QAAaC,MAAA,KAAWC,MAAA,aACxBF,KAAA,OAAYC,MAAA,KAAWC,MAAA,aACvBF,KAAA,WAAgBC,MAAA,sBAEjBE,EAAAvB,IAAAwB,SAAAC,SAAA,MAAZC,IAAAC,EAAA,OAAAC,EAAA,gBACYL,EAAAvB,IAAAwB,SAAAC,SAAA,MAAZC,IAAAC,EAAA,OAAAE,EAAA,8BAGaT,KAAA,WAAgBC,MAAA,sBAEJE,EAAAvB,IAAA8B,SAAAL,SAAA,qCACAF,EAAAvB,IAAA8B,SAAAL,SAAA,sCAGAF,EAAAvB,IAAA8B,SAAAL,SAAA,qCACAF,EAAAvB,IAAA8B,SAAAL,SAAA,qCACAF,EAAAvB,IAAA8B,SAAAL,SAAA,mDAIZL,KAAA,YAAiBC,MAAA,OAAaC,MAAA,6DAI9BF,KAAA,SAAcC,MAAA,sEAMdU,MAAA,QAAcT,MAAA,KAAWD,MAAA,2BAE1BW,KAAAC,EAAAC,KAAYC,OAAA,GAAQC,QAAAC,GAAAnB,EAAAd,OAAAmB,EAAAvB,sCAE7BgC,KAAAC,EAAArD,OACDuD,OAAA,GACCC,QAAAC,GAAAnB,EAAAoB,UAAAf,EAAAvB,uFAODW,KAAA,OAAYlC,MAAA,gBAAsBmC,QAAA,gCAEtC2B,WAAA,GACAC,OAAA,oBACCC,gBAAAvB,EAAAwB,oBACA,aAAA,GACAC,MAAA5B,EAAAhC,MACD,sBAAA"}