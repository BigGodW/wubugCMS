import{s as h,u as C,a as U}from"./site.js";import{ag as n,aq as _,o as g,c as y,a as c,Z as l,V as a,W as v,_ as w,F as q,Y as k}from"./@vue.js";import{_ as S}from"./index.js";import"./api.js";import"./axios.js";import"./form-data.js";import"./element-plus.js";import"./lodash-es.js";import"./@vueuse.js";import"./@element-plus.js";import"./@popperjs.js";import"./@ctrl.js";import"./dayjs.js";import"./async-validator.js";import"./memoize-one.js";import"./escape-html.js";import"./normalize-wheel-es.js";import"./@floating-ui.js";import"./pinia.js";import"./vue-router.js";import"./js-cookie.js";const $={name:"home-sys",data:()=>({loading:!0,activeName:"first",activeIndex:"0",info:{id:"",name:"",domain:"",email:"",icp:"",code:""},seo:{id:"",title:"",keywords:"",description:""},infoRules:{name:[{required:!0,message:"请输入网站名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}]},seoRules:{title:[{required:!0,message:"不能为空",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}]}}),computed:{},created(){this.query()},methods:{handleClick(e){this.activeIndex=e.index},async query(){try{let e=await h();if(e.code===200){this.loading=!1;let{id:o,name:u,domain:p,email:f,icp:r,code:d,title:m,keywords:i,description:s}=e.data;this.info={id:o,name:u,domain:p,email:f,icp:r,code:d},this.seo={id:o,title:m,keywords:i,description:s}}}catch(e){console.log(e)}},async updateInfo(){try{let e=await C(this.info);e.code===200&&e.data&&(this.$message({message:"更新成功^_^",type:"success"}),this.query())}catch(e){console.log(e)}},async updateSeo(){try{let e=await U(this.seo);e.code===200&&e.data&&(this.$message({message:"更新成功^_^",type:"success"}),this.query())}catch(e){console.log(e)}},submitInfo(e){this.$refs[e].validate(o=>{if(o)this.updateInfo();else return console.log("error submit!!"),!1})},submitSeo(e){this.$refs[e].validate(o=>{if(o)this.updateSeo();else return console.log("error submit!!"),!1})}}},N={class:"mr-10 ml-10"},R={class:"mr-10 ml-10"},B={class:"mr-10 ml-10"};function T(e,o,u,p,f,r){const d=n("el-tab-pane"),m=n("el-tabs"),i=n("el-input"),s=n("el-form-item"),V=n("el-button"),b=n("el-form"),I=_("loading");return g(),y(q,null,[c("div",N,[l(m,{modelValue:e.activeName,"onUpdate:modelValue":o[0]||(o[0]=t=>e.activeName=t),onTabClick:r.handleClick},{default:a(()=>[l(d,{label:"基本设置",name:"first"}),l(d,{label:"SEO设置",name:"second"})]),_:1},8,["modelValue","onTabClick"])]),v((g(),y("div",R,[l(b,{ref:"info",rules:e.infoRules,model:e.info,"label-width":"84px"},{default:a(()=>[l(s,{label:"网站名称",prop:"name"},{default:a(()=>[l(i,{modelValue:e.info.name,"onUpdate:modelValue":o[1]||(o[1]=t=>e.info.name=t)},null,8,["modelValue"])]),_:1}),l(s,{label:"网站域名"},{default:a(()=>[l(i,{modelValue:e.info.domain,"onUpdate:modelValue":o[2]||(o[2]=t=>e.info.domain=t)},null,8,["modelValue"])]),_:1}),l(s,{label:"站长邮箱"},{default:a(()=>[l(i,{modelValue:e.info.email,"onUpdate:modelValue":o[3]||(o[3]=t=>e.info.email=t)},null,8,["modelValue"])]),_:1}),l(s,{label:"ICP备案号"},{default:a(()=>[l(i,{modelValue:e.info.icp,"onUpdate:modelValue":o[4]||(o[4]=t=>e.info.icp=t)},null,8,["modelValue"])]),_:1}),l(s,{label:"统计代码"},{default:a(()=>[l(i,{type:"textarea",class:"textarea",rows:3,modelValue:e.info.code,"onUpdate:modelValue":o[5]||(o[5]=t=>e.info.code=t)},null,8,["modelValue"])]),_:1}),l(s,null,{default:a(()=>[l(V,{type:"primary",onClick:o[6]||(o[6]=t=>r.submitInfo("info"))},{default:a(()=>[k("保存")]),_:1})]),_:1})]),_:1},8,["rules","model"])])),[[w,e.activeIndex==="0"],[I,e.loading]]),v(c("div",B,[l(b,{ref:"seo",model:e.seo,rules:e.seoRules,"label-width":"84px"},{default:a(()=>[l(s,{label:"标题",prop:"title"},{default:a(()=>[l(i,{modelValue:e.seo.title,"onUpdate:modelValue":o[7]||(o[7]=t=>e.seo.title=t)},null,8,["modelValue"])]),_:1}),l(s,{label:"关键词"},{default:a(()=>[l(i,{modelValue:e.seo.keywords,"onUpdate:modelValue":o[8]||(o[8]=t=>e.seo.keywords=t)},null,8,["modelValue"])]),_:1}),l(s,{label:"描述"},{default:a(()=>[l(i,{type:"textarea",rows:3,class:"textarea",modelValue:e.seo.description,"onUpdate:modelValue":o[9]||(o[9]=t=>e.seo.description=t)},null,8,["modelValue"])]),_:1}),l(s,null,{default:a(()=>[l(V,{type:"primary",onClick:o[10]||(o[10]=t=>r.submitSeo("seo"))},{default:a(()=>[k("保存")]),_:1})]),_:1})]),_:1},8,["model","rules"])],512),[[w,e.activeIndex==="1"]])],64)}const oe=S($,[["render",T]]);export{oe as default};
