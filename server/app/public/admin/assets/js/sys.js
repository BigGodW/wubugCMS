import{s as C,u as N,a as S}from"./site.js";import{ag as n,ar as $,o as g,c as v,a as c,Z as o,V as t,W as w,_ as k,F as q,Y as U}from"./@vue.js";import{_ as T}from"./index.js";import"./api.js";import"./axios.js";import"./element-plus.js";import"./lodash-es.js";import"./@vueuse.js";import"./@element-plus.js";import"./@popperjs.js";import"./@ctrl.js";import"./dayjs.js";import"./async-validator.js";import"./memoize-one.js";import"./escape-html.js";import"./normalize-wheel-es.js";import"./@floating-ui.js";import"./pinia.js";import"./vue-router.js";import"./js-cookie.js";const h={name:"home-sys",data:()=>({loading:!0,activeName:"first",activeIndex:"0",info:{id:"",name:"",domain:"",email:"",icp:"",police:"",copyright:"",code:""},seo:{id:"",title:"",keywords:"",description:""},infoRules:{name:[{required:!0,message:"请输入网站名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}]},seoRules:{title:[{required:!0,message:"不能为空",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}]}}),computed:{},created(){this.query()},methods:{handleClick(e){this.activeIndex=e.index},async query(){try{let e=await C();if(e.code===200){this.loading=!1;let{id:l,name:V,domain:y,email:b,companyTel:d,companyName:m,companyAddress:p,icp:s,police:i,copyright:r,code:u,title:f,keywords:a,description:I}=e.data;this.info={id:l,name:V,domain:y,email:b,icp:s,police:i,copyright:r,code:u,companyTel:d,companyName:m,companyAddress:p},this.seo={id:l,title:f,keywords:a,description:I}}}catch(e){console.log(e)}},async updateInfo(){try{let e=await N(this.info);e.code===200&&e.data&&(this.$message({message:"更新成功^_^",type:"success"}),this.query())}catch(e){console.log(e)}},async updateSeo(){try{let e=await S(this.seo);e.code===200&&e.data&&(this.$message({message:"更新成功^_^",type:"success"}),this.query())}catch(e){console.log(e)}},submitInfo(e){this.$refs[e].validate(l=>{if(l)this.updateInfo();else return console.log("error submit!!"),!1})},submitSeo(e){this.$refs[e].validate(l=>{if(l)this.updateSeo();else return console.log("error submit!!"),!1})}}},R={class:"mr-10 ml-10"},A={class:"mr-10 ml-10"},B={class:"mr-10 ml-10"};function D(e,l,V,y,b,d){const m=n("el-tab-pane"),p=n("el-tabs"),s=n("el-input"),i=n("el-form-item"),r=n("el-button"),u=n("el-form"),f=$("loading");return g(),v(q,null,[c("div",R,[o(p,{modelValue:e.activeName,"onUpdate:modelValue":l[0]||(l[0]=a=>e.activeName=a),onTabClick:d.handleClick},{default:t(()=>[o(m,{label:"基本设置",name:"first"}),o(m,{label:"SEO设置",name:"second"})]),_:1},8,["modelValue","onTabClick"])]),w((g(),v("div",A,[o(u,{ref:"info",rules:e.infoRules,model:e.info,"label-width":"84px"},{default:t(()=>[o(i,{label:"网站名称",prop:"name"},{default:t(()=>[o(s,{modelValue:e.info.name,"onUpdate:modelValue":l[1]||(l[1]=a=>e.info.name=a)},null,8,["modelValue"])]),_:1}),o(i,{label:"网站域名"},{default:t(()=>[o(s,{modelValue:e.info.domain,"onUpdate:modelValue":l[2]||(l[2]=a=>e.info.domain=a)},null,8,["modelValue"])]),_:1}),o(i,{label:"站长邮箱"},{default:t(()=>[o(s,{modelValue:e.info.email,"onUpdate:modelValue":l[3]||(l[3]=a=>e.info.email=a)},null,8,["modelValue"])]),_:1}),o(i,{label:"ICP备案号"},{default:t(()=>[o(s,{modelValue:e.info.icp,"onUpdate:modelValue":l[4]||(l[4]=a=>e.info.icp=a)},null,8,["modelValue"])]),_:1}),o(i,{label:"公司名称"},{default:t(()=>[o(s,{modelValue:e.info.companyName,"onUpdate:modelValue":l[5]||(l[5]=a=>e.info.companyName=a)},null,8,["modelValue"])]),_:1}),o(i,{label:"公司地址"},{default:t(()=>[o(s,{modelValue:e.info.companyAddress,"onUpdate:modelValue":l[6]||(l[6]=a=>e.info.companyAddress=a)},null,8,["modelValue"])]),_:1}),o(i,{label:"公司电话"},{default:t(()=>[o(s,{modelValue:e.info.companyTel,"onUpdate:modelValue":l[7]||(l[7]=a=>e.info.companyTel=a)},null,8,["modelValue"])]),_:1}),o(i,{label:"统计代码"},{default:t(()=>[o(s,{type:"textarea",class:"textarea",rows:3,modelValue:e.info.code,"onUpdate:modelValue":l[8]||(l[8]=a=>e.info.code=a)},null,8,["modelValue"])]),_:1}),o(i,null,{default:t(()=>[o(r,{type:"primary",onClick:l[9]||(l[9]=a=>d.submitInfo("info"))},{default:t(()=>[U("保存")]),_:1})]),_:1})]),_:1},8,["rules","model"])])),[[k,e.activeIndex==="0"],[f,e.loading]]),w(c("div",B,[o(u,{ref:"seo",model:e.seo,rules:e.seoRules,"label-width":"84px"},{default:t(()=>[o(i,{label:"标题",prop:"title"},{default:t(()=>[o(s,{modelValue:e.seo.title,"onUpdate:modelValue":l[10]||(l[10]=a=>e.seo.title=a)},null,8,["modelValue"])]),_:1}),o(i,{label:"关键词"},{default:t(()=>[o(s,{modelValue:e.seo.keywords,"onUpdate:modelValue":l[11]||(l[11]=a=>e.seo.keywords=a)},null,8,["modelValue"])]),_:1}),o(i,{label:"描述"},{default:t(()=>[o(s,{type:"textarea",rows:3,class:"textarea",modelValue:e.seo.description,"onUpdate:modelValue":l[12]||(l[12]=a=>e.seo.description=a)},null,8,["modelValue"])]),_:1}),o(i,null,{default:t(()=>[o(r,{type:"primary",onClick:l[13]||(l[13]=a=>d.submitSeo("seo"))},{default:t(()=>[U("保存")]),_:1})]),_:1})]),_:1},8,["model","rules"])],512),[[k,e.activeIndex==="1"]])],64)}const le=T(h,[["render",D]]);export{le as default};
