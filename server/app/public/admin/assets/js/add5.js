import{c as w}from"./ad.js";import{E as A}from"./pinyin-pro.js";import{B as C}from"./@element-plus.js";import{_ as B}from"./index.js";import{ag as r,o as i,c as $,Z as a,V as o,a as P,Y as s,U as g}from"./@vue.js";import"./api.js";import"./axios.js";import"./form-data.js";import"./element-plus.js";import"./lodash-es.js";import"./@vueuse.js";import"./@popperjs.js";import"./@ctrl.js";import"./dayjs.js";import"./async-validator.js";import"./memoize-one.js";import"./escape-html.js";import"./normalize-wheel-es.js";import"./@floating-ui.js";import"./pinia.js";import"./vue-router.js";import"./js-cookie.js";const N={name:"ad-add",data:()=>({params:{title:"",mark:"",imgUrl:"",link:"",platform:"1",position:["1"],createdAt:new Date,updatedAt:new Date,status:"1"},disabled:!1,paramsRules:{title:[{required:!0,message:"请输入栏目名称",trigger:"blur"},{min:2,max:50,message:"名称长度在 2 到 50 个字符之间",trigger:"blur"}],mark:[{required:!0,message:"请输入栏目名称",trigger:"blur"},{min:2,max:50,message:"名称长度在 2 到 50 个字符之间",trigger:"blur"}]}}),components:{Plus:C},created(){},watch:{"params.title":function(e,l){this.params.mark=A(e,{toneType:"none"}).replace(/\s+/g,"")}},methods:{handleAttr(e){console.log("e-->",e)},beforeUpload(e){if(e.size/1024/1024>2)return this.$message("上传文件必须小于1M"),!1},upload(e){e.code===200&&(this.params.imgUrl=e.data.path,console.log("this.params.imgUrl",this.params.imgUrl))},async create(){try{let e={...this.params};e.position=e.position.sort((f,b)=>f-b).toString(),(await w(e)).code&&(this.$message({message:"更新成功^_^",type:"success"}),this.$router.go(-1))}catch(e){console.log(e)}},submit(e){this.$refs[e].validate(l=>{if(l)this.create();else return console.log("error submit!!"),!1})}}},q={class:"mr-10 ml-10 mb-20"};function D(e,l,f,b,E,d){const u=r("el-input"),m=r("el-form-item"),n=r("el-radio"),p=r("el-checkbox"),V=r("el-checkbox-group"),_=r("el-image"),c=r("Plus"),k=r("el-icon"),U=r("el-upload"),y=r("el-date-picker"),h=r("el-button"),v=r("el-form");return i(),$("div",q,[a(v,{ref:"params",model:e.params,rules:e.paramsRules,"label-width":"84px"},{default:o(()=>[P("div",null,[a(m,{label:"广告名称",prop:"title"},{default:o(()=>[a(u,{modelValue:e.params.title,"onUpdate:modelValue":l[0]||(l[0]=t=>e.params.title=t),placeholder:"请输入汉字"},null,8,["modelValue"])]),_:1}),a(m,{label:"广告链接"},{default:o(()=>[a(u,{modelValue:e.params.link,"onUpdate:modelValue":l[1]||(l[1]=t=>e.params.link=t)},null,8,["modelValue"])]),_:1}),a(m,{label:"广告标识",prop:"mark"},{default:o(()=>[a(u,{modelValue:e.params.mark,"onUpdate:modelValue":l[2]||(l[2]=t=>e.params.mark=t),placeholder:"模板使用标识"},null,8,["modelValue"])]),_:1}),a(m,{label:"广告平台"},{default:o(()=>[a(n,{modelValue:e.params.platform,"onUpdate:modelValue":l[3]||(l[3]=t=>e.params.platform=t),label:"1"},{default:o(()=>[s("PC")]),_:1},8,["modelValue"]),a(n,{modelValue:e.params.platform,"onUpdate:modelValue":l[4]||(l[4]=t=>e.params.platform=t),label:"2"},{default:o(()=>[s("H5")]),_:1},8,["modelValue"])]),_:1}),a(m,{label:"广告位置"},{default:o(()=>[a(V,{modelValue:e.params.position,"onUpdate:modelValue":l[5]||(l[5]=t=>e.params.position=t),onChange:d.handleAttr},{default:o(()=>[a(p,{label:"1"},{default:o(()=>[s("首页")]),_:1}),a(p,{label:"2"},{default:o(()=>[s("频道页")]),_:1}),a(p,{label:"3"},{default:o(()=>[s("列表页")]),_:1}),a(p,{label:"4"},{default:o(()=>[s("文章页")]),_:1}),a(p,{label:"5"},{default:o(()=>[s("单页")]),_:1})]),_:1},8,["modelValue","onChange"])]),_:1}),a(m,{label:"图片链接"},{default:o(()=>[a(u,{modelValue:e.params.imgUrl,"onUpdate:modelValue":l[6]||(l[6]=t=>e.params.imgUrl=t)},null,8,["modelValue"])]),_:1}),a(m,{label:"广告图片"},{default:o(()=>[a(U,{class:"avatar-uploader",action:"/api/upload","on-success":d.upload,"show-file-list":!1,"before-upload":d.beforeUpload},{default:o(()=>[e.params.imgUrl?(i(),g(_,{key:0,style:{width:"100%"},src:e.params.imgUrl},null,8,["src"])):(i(),g(k,{key:1,class:"avatar-uploader-icon"},{default:o(()=>[a(c)]),_:1}))]),_:1},8,["on-success","before-upload"])]),_:1}),a(m,{label:"发布时间"},{default:o(()=>[a(y,{modelValue:e.params.createdAt,"onUpdate:modelValue":l[7]||(l[7]=t=>e.params.createdAt=t),type:"datetime",placeholder:"选择日期时间"},null,8,["modelValue"])]),_:1}),a(m,{label:"是否显示"},{default:o(()=>[a(n,{modelValue:e.params.status,"onUpdate:modelValue":l[8]||(l[8]=t=>e.params.status=t),label:"1"},{default:o(()=>[s("发布")]),_:1},8,["modelValue"]),a(n,{modelValue:e.params.status,"onUpdate:modelValue":l[9]||(l[9]=t=>e.params.status=t),label:"2"},{default:o(()=>[s("不发布")]),_:1},8,["modelValue"])]),_:1})]),a(m,null,{default:o(()=>[a(h,{type:"primary",onClick:l[10]||(l[10]=t=>d.submit("params"))},{default:o(()=>[s("保存")]),_:1})]),_:1})]),_:1},8,["model","rules"])])}const le=B(N,[["render",D]]);export{le as default};
