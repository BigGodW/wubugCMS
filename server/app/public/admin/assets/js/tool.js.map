{"version":3,"file":"tool.js","sources":["../../../src/utils/tool.js"],"sourcesContent":["import Cookies from \"js-cookie\";\n\nexport const setTitle = (title) => {\n  window.document.title = `${title}-禅悦管理系统` || \"禅悦管理系统\";\n};\n\nexport const setCookie = (tokenName = \"token\", token) => {\n  Cookies.set(tokenName, token);\n};\n\nexport const getCookie = (tokenName = \"token\") => {\n  return Cookies.get(tokenName);\n};\n\n//无限极分类 适配 element-ui组件\nexport let addLabelValue = (arr) => {\n  for (let item of arr) {\n    item[\"label\"] = item[\"name\"];\n    item[\"value\"] = item[\"id\"];\n    if (item.children) {\n      addLabelValue(item.children);\n    }\n  }\n  return arr;\n};\n\n// 无限极分类tree\nexport let tree = (arr, pid = 0, leval = 1) => {\n  let tmp = [];\n  arr.forEach((item, index) => {\n    if (item.pid == pid) {\n      item.leval = leval;\n      item.children = tree(arr, item.id, leval + 1);\n      tmp.push(item);\n    }\n  });\n  return tmp;\n};\n\n//返回id父级所有栏目\nexport let treeById = (id, source) => {\n  const arr = [];\n  let findId = (id, source) => {\n    for (let i = 0, item; i < source.length; i++) {\n      item = source[i];\n      if (item.id == id) {\n        arr.unshift(item.id);\n        if (item.pid != 0) {\n          findId(item.pid, source);\n        }\n      }\n    }\n  };\n  findId(id, source);\n  return arr;\n};\n\n// html过滤出图片\nexport let getImgUrlFromStr = (str) => {\n  let imgReg = /<img.*?(?:>|\\/>)/gi; //匹配出图片img标签\n  // eslint-disable-next-line no-useless-escape\n  let srcReg = /src=[\\'\\\"]?([^\\'\\\"]*)[\\'\\\"]?/i; //匹配出图片src属性\n  let arr = str.match(imgReg);\n  let imgArr = [];\n  if (arr) {\n    for (let i = 0; i < arr.length; i++) {\n      let src = arr[i].match(srcReg);\n      if (src[1]) {\n        imgArr.push(src[1]);\n      }\n    }\n  }\n  return imgArr;\n};\n\n// 过滤 html标签\nexport let filterHtml = (str) => {\n  return str.replace(/<[^>]*>/g, \"\");\n};\n\n// 过滤 body标签\nexport let filterBody = (str) => {\n  var result = /<body[^>]*>([\\s\\S]*)<\\/body>/.exec(str);\n  if (result && result.length === 2) return result[1];\n  return str;\n};\n"],"names":["setCookie","tokenName","token","api","set","getCookie","Cookies","get","addLabelValue","arr","item","children","tree","pid","leval","tmp","forEach","index","id","push","treeById","source","findId","i","length","unshift","getImgUrlFromStr","str","srcReg","match","imgArr","src","filterHtml","replace"],"mappings":"mCAMY,MAACA,EAAY,CAACC,EAAY,QAASC,KACrCC,EAAAC,IAAIH,EAAWC,EAAK,EAGjBG,EAAY,CAACJ,EAAY,UAC7BK,EAAQC,IAAIN,GAIX,IAACO,EAAiBC,IAC1B,IAAA,IAASC,KAAQD,EACVC,EAAO,MAAIA,EAAW,KACtBA,EAAO,MAAIA,EAAS,GACrBA,EAAKC,UACPH,EAAcE,EAAKC,UAGhB,OAAAF,CAAA,EAIEG,EAAO,CAACH,EAAKI,EAAM,EAAGC,EAAQ,KACvC,IAAIC,EAAM,GAQH,OAPHN,EAAAO,SAAQ,CAACN,EAAMO,KACbP,EAAKG,KAAOA,IACdH,EAAKI,MAAQA,EACbJ,EAAKC,SAAWC,EAAKH,EAAKC,EAAKQ,GAAIJ,EAAQ,GAC3CC,EAAII,KAAKT,GACV,IAEIK,CAAA,EAIEK,EAAW,CAACF,EAAIG,KACzB,MAAMZ,EAAM,GACR,IAAAa,EAAS,CAACJ,EAAIG,KAChB,IAAA,IAAgBX,EAAPa,EAAI,EAASA,EAAIF,EAAOG,OAAQD,IACvCb,EAAOW,EAAOE,GACVb,EAAKQ,IAAMA,IACTT,EAAAgB,QAAQf,EAAKQ,IACD,GAAZR,EAAKG,KACAS,EAAAZ,EAAKG,IAAKQ,GAGtB,EAGI,OADPC,EAAOJ,EAAIG,GACJZ,CAAA,EAIEiB,EAAoBC,IAC7B,IAEIC,EAAS,gCACTnB,EAAMkB,EAAIE,MAHD,sBAITC,EAAS,GACb,GAAIrB,EACF,IAAA,IAASc,EAAI,EAAGA,EAAId,EAAIe,OAAQD,IAAK,CACnC,IAAIQ,EAAMtB,EAAIc,GAAGM,MAAMD,GACnBG,EAAI,IACCD,EAAAX,KAAKY,EAAI,GAEnB,CAEI,OAAAD,CAAA,EAIEE,EAAcL,GAChBA,EAAIM,QAAQ,WAAY"}