import{D as e,o as a,F as l,G as t,q as o,p as s,u as m,y as d,t as r,f as u}from"./element-plus.js";import{f as i}from"./category.js";import{c as n}from"./page.js";import{a as p,t as c}from"./tool.js";import{_ as V}from"./@jsdawn.js";import{t as f}from"./tinymce.js";import{ae as g,o as h,c as _,a as y,U as j,W as b,F as v,a1 as U,a2 as w,_ as x}from"./@vue.js";import{_ as C}from"./index.js";import"./lodash-es.js";import"./async-validator.js";import"./@vueuse.js";import"./dayjs.js";import"./@element-plus.js";import"./@ctrl.js";import"./@popperjs.js";import"./memoize-one.js";import"./escape-html.js";import"./normalize-wheel-es.js";import"./js-cookie.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vue-router.js";import"./axios.js";/* empty css        */const k={class:"mr-10 ml-10"},S={class:"mr-10 ml-10 mb-20"};const D=C({name:"page-add",components:{Vue3Tinymce:V},data:()=>({setting:f,categorySelected:[],categoryProps:{checkStrictly:!0},activeName:"first",activeIndex:"0",category:[],cateList:[],autoImg:!0,autoDes:!0,picNum:1,params:{cid:0,title:"",seo_title:"",seo_keywords:"",seo_description:"",source:"",author:"",createdAt:new Date,updatedAt:new Date,content:"禅悦",status:"0",pv:0},paramsRules:{title:[{required:!0,message:"请输入栏目名称",trigger:"blur"},{min:2,max:50,message:"名称长度在 2 到 50 个字符之间",trigger:"blur"}]}}),computed:{},mounted(){},created(){this.query()},unmounted(){},methods:{handleClick(e){this.activeIndex=e.index},setContent(e){this.params.content=e},async query(){try{let e=await i();if(200===e.code){let a=p(c(e.data)),l=p(e.data);this.cateList=l,this.category=[...a]}}catch(e){console.log(e)}},handleChange(e){-1!=e[0]&&(this.params.cid=e[e.length-1])},handleAttr(e){console.log("e--\x3e",e)},handleSubCid(e){console.log("e--\x3e",e)},changeContent(e){this.params.content=e},async create(){try{200==(await n(this.params)).code&&(this.$message({message:"更新成功^_^",type:"success"}),this.$router.go(-1))}catch(e){console.log(e)}},submit(e){this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),!1;console.log(this.params),this.create()}))}}},[["render",function(i,n,p,c,V,f){const C=l,D=e,I=t,N=o,A=s,q=g("vue3-tinymce"),E=m,O=d,T=r,$=u,z=a;return h(),_(v,null,[y("div",k,[j(D,{modelValue:i.activeName,"onUpdate:modelValue":n[0]||(n[0]=e=>i.activeName=e),onTabClick:f.handleClick},{default:b((()=>[j(C,{label:"基本信息",name:"first"}),j(C,{label:"扩展信息",name:"second"})])),_:1},8,["modelValue","onTabClick"])]),y("div",S,[j(z,{ref:"params",model:i.params,rules:i.paramsRules,"label-width":"84px",class:""},{default:b((()=>[U(y("div",null,[j(N,{label:"文章栏目"},{default:b((()=>[j(I,{props:i.categoryProps,"show-all-levels":!1,modelValue:i.categorySelected,"onUpdate:modelValue":n[1]||(n[1]=e=>i.categorySelected=e),options:i.category,onChange:f.handleChange},null,8,["props","modelValue","options","onChange"])])),_:1}),j(N,{label:"文章标题",prop:"title"},{default:b((()=>[j(A,{modelValue:i.params.title,"onUpdate:modelValue":n[2]||(n[2]=e=>i.params.title=e)},null,8,["modelValue"])])),_:1}),j(N,{label:"文章内容"},{default:b((()=>[j(q,{modelValue:i.params.content,"onUpdate:modelValue":n[3]||(n[3]=e=>i.params.content=e),setting:i.setting,"script-src":"/public/admin/tinymce/tinymce.min.js"},null,8,["modelValue","setting"])])),_:1}),j(N,{label:"内容功能"},{default:b((()=>[j(E,{modelValue:i.autoImg,"onUpdate:modelValue":n[5]||(n[5]=e=>i.autoImg=e)},{default:b((()=>[x(" 提取第 "),j(A,{modelValue:i.picNum,"onUpdate:modelValue":n[4]||(n[4]=e=>i.picNum=e),class:"w-80 mr-8 ml-8",placeholder:"请输入内容"},null,8,["modelValue"]),x("张图片作封面 ")])),_:1},8,["modelValue"])])),_:1}),j(N,{label:"提取文章描述"},{default:b((()=>[j(E,{modelValue:i.autoDes,"onUpdate:modelValue":n[6]||(n[6]=e=>i.autoDes=e)},{default:b((()=>[x("提取文章描述")])),_:1},8,["modelValue"])])),_:1}),j(N,{label:"发布时间"},{default:b((()=>[j(O,{modelValue:i.params.createdAt,"onUpdate:modelValue":n[7]||(n[7]=e=>i.params.createdAt=e),"default-value":new Date,type:"datetime",placeholder:"选择日期时间"},null,8,["modelValue","default-value"])])),_:1}),j(N,{label:"是否显示"},{default:b((()=>[j(T,{modelValue:i.params.status,"onUpdate:modelValue":n[8]||(n[8]=e=>i.params.status=e),label:"0"},{default:b((()=>[x("发布")])),_:1},8,["modelValue"]),j(T,{modelValue:i.params.status,"onUpdate:modelValue":n[9]||(n[9]=e=>i.params.status=e),label:"1"},{default:b((()=>[x("不发布")])),_:1},8,["modelValue"])])),_:1}),j(N,{label:"浏览数"},{default:b((()=>[j(A,{modelValue:i.params.pv,"onUpdate:modelValue":n[10]||(n[10]=e=>i.params.pv=e)},null,8,["modelValue"])])),_:1})],512),[[w,0==i.activeIndex]]),U(y("div",null,[j(N,{label:"SEO标题"},{default:b((()=>[j(A,{modelValue:i.params.seo_title,"onUpdate:modelValue":n[11]||(n[11]=e=>i.params.seo_title=e)},null,8,["modelValue"])])),_:1}),j(N,{label:"SEO关键词"},{default:b((()=>[j(A,{modelValue:i.params.seo_keywords,"onUpdate:modelValue":n[12]||(n[12]=e=>i.params.seo_keywords=e)},null,8,["modelValue"])])),_:1}),j(N,{label:"SEO描述"},{default:b((()=>[j(A,{modelValue:i.params.seo_description,"onUpdate:modelValue":n[13]||(n[13]=e=>i.params.seo_description=e)},null,8,["modelValue"])])),_:1}),j(N,{label:"来源"},{default:b((()=>[j(A,{modelValue:i.params.source,"onUpdate:modelValue":n[14]||(n[14]=e=>i.params.source=e)},null,8,["modelValue"])])),_:1}),j(N,{label:"作者"},{default:b((()=>[j(A,{modelValue:i.params.author,"onUpdate:modelValue":n[15]||(n[15]=e=>i.params.author=e)},null,8,["modelValue"])])),_:1})],512),[[w,1==i.activeIndex]]),j(N,null,{default:b((()=>[j($,{type:"primary",onClick:n[16]||(n[16]=e=>f.submit("params"))},{default:b((()=>[x("保存")])),_:1})])),_:1})])),_:1},8,["model","rules"])])],64)}]]);export{D as default};
//# sourceMappingURL=add10.js.map
